(()=>{"use strict";class e{constructor(e,t){this.userInfo=e,this.gameInfo=t}}e.GameInformation=class{constructor(e,t,i,s,n){this.isDemo=e,this.version=t,this.versionType=i,this.disableMultiplayer=s,this.disableChat=n}},e.UserInformation=class{constructor(e){this.userName=e}};var t=function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};class i{constructor(e,t){this.audioCtx=new AudioContext,this.gainNode=this.audioCtx.createGain(),this.sounds={},this.mc=e,this.gameSettings=t,this.gainNode.connect(this.audioCtx.destination)}play(e,i,s){return t(this,void 0,void 0,(function*(){this.sounds[e.getSoundName()]||(yield this.add(e));const t=s*this.gameSettings.getSoundLevel(i),n=this.audioCtx.createBufferSource();n.buffer=this.sounds[e.getSoundName()],n.connect(this.gainNode),this.gainNode.gain.setValueAtTime(t,this.audioCtx.currentTime),n.start(0)}))}add(e){return t(this,void 0,void 0,(function*(){yield this.loadSound(e.getBufferSrc()).then((t=>this.sounds[e.getSoundName()]=t))}))}loadSound(e){return t(this,void 0,void 0,(function*(){return fetch(e).then((e=>e.arrayBuffer())).then((e=>this.audioCtx.decodeAudioData(e)))}))}}class s{static milliTime(){return(new Date).getMilliseconds()}static formatString(e,...t){for(let i=0;i<t.length;i++)e=e.replace(/%[a-zA-Z]/,t[i]);return e}static nanoTime(){return 1e6*this.milliTime()}static createLog(...e){let t="";e.forEach((e=>t+=e)),console.log(t.trim())}static isInside(e,t,i,s,n,r,a){return e>i&&e<i+s&&t>n&&t<n+r&&a()}static sortIteratable(e,t){return e.getId()-t.getId()}static getTranslation(e){const t=Ie.getInstance().getLanguageManager();return t.getLanguageData(Ie.getInstance().gameSettings.language)[e]?t.getLanguageData(Ie.getInstance().gameSettings.language)[e]:e}static hashCode53(e,t=0){let i=3735928559^t,s=1103547991^t;for(let t,n=0;n<e.length;n++)t=e.charCodeAt(n),i=Math.imul(i^t,2654435761),s=Math.imul(s^t,1597334677);return i=Math.imul(i^i>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),s=Math.imul(s^s>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),4294967296*(2097151&s)+(i>>>0)}static arrayToMap(e){return e.reduce((function(e,t){return e[t.key]=t.val,e}),{})}}class n{constructor(e,t){this.soundName=e,this.soundSrc=t}getSoundName(){return this.soundName}getBufferSrc(){return this.soundSrc}}n.clickStereo=new n("click_stereo","./resources/assets/minecraft/sounds/click_stereo.ogg");class r{constructor(e){this.namespace=r.decompose(e,":")[0],this.path=r.decompose(e,":")[1]}getPath(){return this.path}getNamespace(){return this.namespace}getFullPath(){return"./resources/assets/"+this.namespace+"/"+this.path}toString(){return this.namespace+":"+this.path}static decompose(e,t){let i=["minecraft",e],s=e.indexOf(t);return s>=0&&(i[1]=e.substring(s+1,e.length),s>=1&&(i[0]=e.substring(0,s))),i}}class a{static getAlpha(e){return e>>>24}static getRed(e){return e>>16&255}static getGreen(e){return e>>8&255}static getBlue(e){return 255&e}static packColor(e,t,i){return`rgb(${e}, ${t}, ${i})`}static packDarkerColor(e,t,i){return`rgb(${.13*e}, ${.13*t}, ${.13*i})`}static getColor(e){return"string"==typeof e?e:this.packColor(this.getRed(e),this.getGreen(e),this.getBlue(e))}static getDarkerColor(e){return"string"==typeof e?e:this.packDarkerColor(this.getRed(e),this.getGreen(e),this.getBlue(e))}}class o{static rotateScale(e,t,i,s,n=1){e.translate(i,s),e.scale(n,n),e.rotate(t),e.translate(-i,-s)}static createTilePattern(e,t,i,s,n,r,a,o,h,c){for(let l=0;l<i;l++)for(let i=0;i<s;i++)e.drawImage(t,n,r,a,o,h+l*a,c+16*i,a,o)}static fill(e,t,i,s,n,r,a=1){let o=r>>16&255,h=r>>8&255,c=255&r;e.beginPath(),e.moveTo(t,s),e.lineTo(i+t,s),e.lineTo(t,n+s),e.moveTo(i+t,s),e.lineTo(t,n+s),e.lineTo(i+t,n+s),e.fillStyle=`rgb(${o}, ${h}, ${c}, ${a})`,e.fill()}}class h{constructor(e){this.name=e}getName(){return this.name}}h.MASTER=new h("master"),h.MUSIC=new h("music"),h.RECORDS=new h("record"),h.WEATHER=new h("weather"),h.BLOCKS=new h("block"),h.HOSTILE=new h("hostile"),h.NEUTRAL=new h("neutral"),h.PLAYERS=new h("player"),h.AMBIENT=new h("ambient"),h.VOICE=new h("voice"),h.SOUND_CATEGORIES=new Map(Object.values(h).slice(0,-1));class c extends class{constructor(){}}{constructor(e){super(),this.key=e}getTranslatedKey(){return s.getTranslation(this.key)}getKey(){return this.key}}class l{hLine(e,t,i,s,n){if(i<t){let r=t;t=i,i=r,e.fillStyle="number"==typeof n?"white":n,e.fillRect(t,s,i+1,s+1)}}vLine(e,t,i,s,n){if(s<i){let e=i;i=s,s=e}e.fillStyle="number"==typeof n?"white":n,e.fillRect(t,i+1,t+1,s)}static blit(e,t,i,s,n,r,a,o){e.drawImage(t,n,r,a,o,i,s,a,o)}drawCenteredString(e,t,i,s,n,r){t.drawStringWithShadow(e,i,s-t.getTextWidth(i)/2,n,r)}drawString(e,t,i,s,n,r){t.drawStringWithShadow(e,i,s,n,r)}static createBuffer(e,t,i){const s=document.createElement("canvas").getContext("2d");return s.canvas.width=e,s.canvas.height=t,s.save(),i(s),s.restore(),s.canvas}}l.BACKGROUND_LOCATION=new r("textures/gui/options_background.png");class u extends l{constructor(e,t,i,s,n){super(),this.wasHovered=!1,this.isHovered=!1,this.active=!0,this.visible=!0,this.alpha=1,this.focused=!1,this.isMouseOver=(e,t)=>this.active&&this.visible&&e>=this.x&&t>=this.y&&e<this.x+this.width&&t<this.y+this.height,this.getWidth=()=>this.width,this.getMessage=()=>this.message,this.isFocused=()=>this.focused,this.isValidClickButton=e=>0===e,this.clicked=(e,t)=>this.active&&this.visible&&e>=this.x&&t>=this.y&&e<this.x+this.width&&t<this.y+this.height,this.x=e,this.y=t,this.width=i,this.height=s,this.message=n}render(e,t,i,s){this.visible&&(this.isHovered=t>=this.x&&i>=this.y&&t<this.x+this.width&&i<this.y+this.height,this.visible&&this.renderButton(e,t,i,s),this.wasHovered=this.getIsHovered())}renderButton(e,t,i,s){const n=Ie.getInstance(),r=n.fontRenderer,a=n.getTextureManager().getTexture(u.WIDGETS_LOCATION);let o=this.getYImage(this.getIsHovered());e.globalAlpha=this.alpha,l.blit(e,a,this.x,this.y,0,46+20*o,this.width/2,this.height),l.blit(e,a,this.x+this.width/2,this.y,200-this.width/2,46+20*o,this.width/2,this.height),this.renderBg(e,n,t,i);let h=this.active?16777215:10526880;this.drawCenteredString(e,r,this.getMessage(),this.x+this.width/2,this.y+(this.height-8)/2,h),e.globalAlpha=1}getYImage(e){return this.active?e?2:1:0}renderBg(e,t,i,s){}onClick(e,t){}onRelease(e,t){}onDrag(e,t,i,s){}mouseMoved(e,t){return!1}mouseClicked(e,t,i){return!(!this.active||!this.visible)&&(!(!this.isValidClickButton(i)||!this.clicked(e,t))&&(this.playDownSound(Ie.getInstance().getSoundHandler()),this.onClick(e,t),!0))}playDownSound(e){e.play(n.clickStereo,h.MASTER,.5)}mouseReleased(e,t,i){return!!this.isValidClickButton(i)&&(this.onRelease(e,t),!0)}mouseDragged(e,t,i,s,n){return!!this.isValidClickButton(i)&&(this.onDrag(e,t,s,n),!0)}mouseScrolled(e,t,i){return!1}keyPressed(e,t){return!1}keyReleased(e,t){return!1}changeFocus(e){return!(!this.active||!this.visible)&&(this.focused=!this.focused,this.onFocusedChanged(this.focused),this.focused)}onFocusedChanged(e){}setWidth(e){this.width=e}setAlpha(e){this.alpha=e}setMessage(e){this.message=e}setFocused(e){this.focused=e}getIsHovered(){return this.isHovered||this.focused}}u.WIDGETS_LOCATION=new r("textures/gui/widgets.png");class g extends u{constructor(e,t,i,s,n){super(e,t,i,s,n)}onClick(e,t){this.onPress()}keyPressed(e,t){return!(!(this.active&&this.visible&&this.getIsHovered())||"Enter"!=e&&" "!=e||(this.playDownSound(Ie.getInstance().getSoundHandler()),this.onPress(),0))}}class d extends g{constructor(e,t,i,s,n,r){super(e,t,i,s,n),this.onPressFunc=r}onPress(){this.onPressFunc(this)}}class m extends d{constructor(e,t,i,s,n,r,a,o,h,c,l,u){super(e,t,i,s,u,l),this.textureWidth=h,this.textureHeight=c,this.xTexStart=n,this.yTexStart=r,this.yDiffText=a,this.resourceLocation=o}setPosition(e,t){this.x=e,this.y=t}renderButton(e,t,i){const s=Ie.getInstance().getTextureManager().getTexture(this.resourceLocation);let n=this.yTexStart;this.getIsHovered()&&(n+=this.yDiffText),e.globalAlpha=this.alpha,l.blit(e,s,this.x,this.y,this.xTexStart,n,this.width,this.height),e.globalAlpha=1}}class p extends l{constructor(){super(...arguments),this.listener=null,this.isDragging=!1}getIsDragging(){return this.isDragging}setDragging(e){this.isDragging=e}getListener(){return this.listener}setListener(e){this.listener=e}getEventListeners(){}setFocusedDefault(e){this.setListener(e),null!==e&&e.changeFocus(!0)}setListenerDefault(e){this.setListener(e)}mouseMoved(e,t){return!1}mouseClicked(e,t,i){for(let s=0;s<this.getEventListeners().length;s++){const n=this.getEventListeners()[s];if(n.mouseClicked(e,t,i))return this.setListener(n),0==i&&this.setDragging(!0),!0}return!1}mouseReleased(e,t,i){this.setDragging(!1);for(let s=0;s<this.getEventListeners().length;s++){const n=this.getEventListeners()[s];if(n.isMouseOver(e,t))return n.mouseReleased(e,t,i),!0}return!1}mouseDragged(e,t,i,s,n){return!(null==this.getListener()||!this.getIsDragging()||0!=i)&&this.getListener().mouseDragged(e,t,i,s,n)}mouseScrolled(e,t,i){return this.getListener()&&this.getListener().mouseScrolled(e,t,i),!1}keyPressed(e,t){return null!=this.getListener()&&this.getListener().keyPressed(e,t)}keyReleased(e,t){return null!=this.getListener()&&this.getListener().keyReleased(e,t)}changeFocus(e){let t=this.getListener();if(null!=t&&t.changeFocus(e))return!0;for(let e=0;e<this.getEventListeners().length;e++)this.getEventListeners()[e].isFocused();return this.setListener(null),!1}isMouseOver(e,t){return!1}}class S extends p{constructor(...e){super(),this.title="",this.children=new Array,this.width=0,this.height=0,this.buttons=new Array,this.passEvents=!1,e.length>0&&(this.title=e[0])}getTitle(){return this.title?this.title:""}render(e,t,i,s){for(let n=0;n<this.buttons.length;++n)this.buttons[n].render(e,t,i,s);this.minecraft.gameSettings.showFPS&&(e.setTransform(2,0,0,2,0,0),this.drawString(e,this.font,this.minecraft.getFPS().toString()+" FPS",1,1,16777215),e.setTransform(this.minecraft.getMainCanvas().getGuiScaleFactor(),0,0,this.minecraft.getMainCanvas().getGuiScaleFactor(),0,0))}shouldCloseOnEsc(){return!0}closeScreen(){this.minecraft.displayGuiScreen(null)}addButton(e){return this.buttons.push(e),this.addListener(e)}addListener(e){return this.children.push(e),e}keyPressed(e,t){return"Escape"==e&&this.shouldCloseOnEsc()?(this.closeScreen(),!0):"Tab"==e?(this.changeFocus(!0)||this.changeFocus(!1),!1):super.keyPressed(e,t)}initScreen(e,t,i){this.minecraft=e,this.font=e.fontRenderer,this.width=t,this.height=i,this.buttons=[],this.children=[],this.setListener(null),this.init()}getEventListeners(){return this.children}init(){}tick(){}onClose(){}isPauseScreen(){return!0}resize(e,t,i){this.initScreen(e,t,i)}static wrapScreenError(e,t,i){try{e()}catch(e){throw`\n        Failed to run action\n        Screen name: ${i}\n        ${t}\n\n        More Details:\n          ${e}\n      `}}isMouseOver(e,t){return!0}renderBackground(e,t){t?null!=this.minecraft.world||this.renderDirtBackground(e,t):this.renderDirtBackground(e,0)}renderDirtBackground(e,t){const i=this.minecraft.getTextureManager().getTexture(l.BACKGROUND_LOCATION);if(this.minecraft.textureBuffer.has("options_bg_0")){const i=this.minecraft.textureBuffer.get("options_bg_0");e.setTransform(this.minecraft.getMainCanvas().getGuiScaleFactor()+3-(3-this.minecraft.getMainCanvas().getGuiScaleFactor()),0,0,this.minecraft.getMainCanvas().getGuiScaleFactor()+3-(3-this.minecraft.getMainCanvas().getGuiScaleFactor()),0,0),o.createTilePattern(e,i,this.width/32,this.height/32,0,0,16,16,0,t),e.setTransform(this.minecraft.getMainCanvas().getGuiScaleFactor(),0,0,this.minecraft.getMainCanvas().getGuiScaleFactor(),0,0)}else this.minecraft.textureBuffer.add("options_bg_0",l.createBuffer(16,16,(e=>{e.filter="brightness(25%)",l.blit(e,i,0,0,0,0,16,16)})))}tempAddOptions(e){let t=0;for(const i of e){let e=this.width/2-155+t%2*160,s=this.height/6-12+24*(t>>1);this.addButton(i.createWidget(this.minecraft.gameSettings,e,s,150)),t++}}getClassName(){return this.constructor.name}}class f{static clamp(e,t,i){return e<t?t:e>i?i:e}static lerp(e,t,i){return t+e*(i-t)}static ceil(e){let t=~~e;return e>t?t+1:t}static normalizeAngle(e,t){return e-t*Math.floor(e/t)}static sqrt(e){return Math.sqrt(e)}}class w{constructor(e,t){this.id=e,this.key=t}getId(){return this.id}getKey(){return this.key}static byId(e){return w.BY_ID[f.normalizeAngle(e,w.BY_ID.length)]}}w.OFF=new w(0,"options.ao.off"),w.MIN=new w(1,"options.ao.min"),w.MAX=new w(2,"options.ao.max"),w.BY_ID=Object.values(w).sort(s.sortIteratable);class _{constructor(e,t){this.id=e,this.key=t}getId(){return this.id}getKey(){return this.key}static byId(e){return _.BY_ID[f.normalizeAngle(e,_.BY_ID.length)]}}_.OFF=new _(0,"options.off"),_.CROSSHAIR=new _(1,"options.attack.crosshair"),_.HOTBAR=new _(2,"options.attack.hotbar"),_.BY_ID=Object.values(_).sort(s.sortIteratable);class y extends d{constructor(e,t,i,s,n,r,a){super(e,t,i,s,r,a),this.enumOptions=n}}class x{constructor(e){this.translatedBaseMessage=e}getBaseMessageTranslation(){return this.translatedBaseMessage}getGenericValueComponent(e){return s.getTranslation(this.getBaseMessageTranslation())+": "+s.getTranslation(e)}getPercentValueComponent(e){return s.getTranslation(this.getBaseMessageTranslation())+`: ${~~(100*e)}%`}getPixelValueComponent(e){return`${s.getTranslation(this.getBaseMessageTranslation())}: ${e}px`}getPercentageAddMessage(e){return`${s.getTranslation(this.getBaseMessageTranslation())}: ${~~e}`}getMessageWithValue(e){return this.getGenericValueComponent(e.toString())}}class I extends x{constructor(e,t,i){super(e),this.getter=t,this.setter=i}set(e,t){this.setPriv(e,"true"===t)}nextValue(e){this.setPriv(e,!this.get(e)),e.saveOptions()}setPriv(e,t){this.setter(e,t)}get(e){return this.getter(e)}createWidget(e,t,i,s){return new y(t,i,s,20,this,this.getName(e),(t=>{this.nextValue(e),console.log(this.getName(e)),t.setMessage(this.getName(e))}))}getName(e){return s.getTranslation(this.getBaseMessageTranslation())+": "+s.getTranslation(!0===this.get(e)?"options.on":"options.off")}}class T{constructor(e,t){this.id=e,this.key=t}getId(){return this.id}getKey(){return this.key}static byId(e){return T.BY_ID[f.normalizeAngle(e,T.BY_ID.length)]}}T.FULL=new T(0,"options.chat.visibility.full"),T.HIDDEN=new T(2,"options.chat.visibility.hidden"),T.SYSTEM=new T(1,"options.chat.visibility.system"),T.BY_ID=Object.values(T).sort(s.sortIteratable);class C{constructor(e,t){this.id=e,this.key=t}getId(){return this.id}getKey(){return this.key}static byId(e){return C.BY_ID[f.normalizeAngle(e,C.BY_ID.length)]}}C.OFF=new C(0,"options.off"),C.FAST=new C(1,"options.clouds.fast"),C.FANCY=new C(2,"options.clouds.fancy"),C.BY_ID=Object.values(C).sort(s.sortIteratable);class b{constructor(e,t){this.id=e,this.key=t}getId(){return this.id}getKey(){return this.key}static byId(e){return b.BY_ID[f.normalizeAngle(e,b.BY_ID.length)]}}b.FAST=new b(0,"options.graphics.fast"),b.FANCY=new b(1,"options.graphics.fancy"),b.FABULOUS=new b(2,"options.graphics.fabulous"),b.BY_ID=Object.values(b).sort(s.sortIteratable);class v{constructor(e,t){this.id=e,this.key=t}getId(){return this.id}getKey(){return this.key}static byId(e){return v.BY_ID[f.normalizeAngle(e,v.BY_ID.length)]}}v.LEFT=new v(0,"options.mainHand.left"),v.RIGHT=new v(1,"options.mainHand.right"),v.BY_ID=Object.values(v).sort(s.sortIteratable);class k{constructor(e,t){this.id=e,this.key=t}getId(){return this.id}getKey(){return this.key}static byId(e){return k.BY_ID[f.normalizeAngle(e,k.BY_ID.length)]}}k.OFF=new k(0,"options.narrator.off"),k.ALL=new k(1,"options.narrator.all"),k.CHAT=new k(2,"options.narrator.chat"),k.SYSTEM=new k(3,"options.narrator.system"),k.BY_ID=Object.values(k).sort(s.sortIteratable);class E extends x{constructor(e,t,i){super(e),this.setter=t,this.getter=i}setValueIndex(e,t){this.setter(e,t),e.saveOptions()}createWidget(e,t,i,s){return new y(t,i,s,20,this,this.getName(e),(t=>{this.setValueIndex(e,1),t.setMessage(this.getName(e))}))}getName(e){return this.getter(e,this)}}class L{constructor(e,t){this.id=e,this.key=t}getId(){return this.id}getKey(){return this.key}static byId(e){return L.BY_ID[f.normalizeAngle(e,L.BY_ID.length)]}}L.ALL=new L(0,"options.particles.all"),L.DESCREASED=new L(1,"options.particles.decreased"),L.MINIMAL=new L(2,"options.particles.minimal"),L.BY_ID=Object.values(L).sort(s.sortIteratable);class O{constructor(e,t){this.id=e,this.key=t}getId(){return this.id}getKey(){return this.key}static byId(e){return O.BY_ID[f.normalizeAngle(e,O.BY_ID.length)]}}O.FIRST_PERSON=new O(0,"FIRST_PERSON"),O.THIRD_PERSON_BACK=new O(1,"THIRD_PERSON_BACK"),O.THIRD_PERSON_FRONT=new O(2,"THIRD_PERSON_FRONT"),O.BY_ID=Object.values(O).sort(s.sortIteratable);class M extends u{constructor(e,t,i,s,n,r){super(e,t,i,s,n),this.sliderValue=r}getYImage(e){return 0}renderBg(e,t,i,s){let n=20*(this.getIsHovered()?2:1);const r=t.getTextureManager().getTexture(u.WIDGETS_LOCATION);l.blit(e,r,this.x+this.sliderValue*(this.width-8),this.y,0,46+n,4,20),l.blit(e,r,this.x+this.sliderValue*(this.width-8)+4,this.y,196,46+n,4,20)}onClick(e,t){this.changeSliderValue(e)}keyDown(e,t){if(this.isFocused()){let t="ArrowLeft"==e;if(t||"ArrowRight"==e){let e=t?-1:1;this.setSliderValue(this.sliderValue+e/(this.width-8))}}return!1}changeSliderValue(e){this.setSliderValue((e-(this.x+4))/(this.width-8))}setSliderValue(e){let t=this.sliderValue;this.sliderValue=f.clamp(e,0,1),t!=this.sliderValue&&this.setSaveOptionValue(),this.setName()}onDrag(e,t,i,s){this.changeSliderValue(e),super.onDrag(e,t,i,s)}playDownSound(e){}onRelease(e,t){super.playDownSound(Ie.getInstance().getSoundHandler())}}class N extends M{constructor(e,t,i,s,n,r){super(t,i,s,n,"",r),this.settings=e}}class A extends N{constructor(e,t,i,s,n,r){super(e,t,i,s,n,r.normalizeValue(r.get(e))),this.option=r,this.setName()}setSaveOptionValue(){this.option.set(this.settings,this.option.denormalizeValue(this.sliderValue)),this.settings.saveOptions()}setName(){this.setMessage(this.option.getName(this.settings))}}class D extends x{constructor(e,t,i,s,n,r,a){super(e),this.minValue=t,this.maxValue=i,this.stepSize=s,this.getter=n,this.setter=r,this.getDisplayStringFunc=a}createWidget(e,t,i,s){return new A(e,t,i,s,20,this)}normalizeValue(e){return f.clamp((this.snapToStepClamp(e)-this.minValue)/(this.maxValue-this.minValue),0,1)}denormalizeValue(e){return this.snapToStepClamp(f.lerp(f.clamp(e,0,1),this.minValue,this.maxValue))}snapToStepClamp(e){return this.stepSize>0&&(e=this.stepSize*Math.round(e/this.stepSize)),f.clamp(e,this.minValue,this.maxValue)}getMinValue(){return this.minValue}getMaxValue(){return this.maxValue}setMaxValue(e){this.maxValue=e}set(e,t){this.setter(e,t)}get(e){return this.getter(e)}getName(e){return this.getDisplayStringFunc(e,this)}}class F{}F.RAW_MOUSE_INPUT=new I("options.rawMouseInput",(e=>e.rawMouseInput),((e,t)=>{e.rawMouseInput=t})),F.AUTO_SUGGEST_COMMANDS=new I("options.autoSuggestCommands",(e=>e.autoSuggestCommands),((e,t)=>{e.autoSuggestCommands=t})),F.field_244786_G=new I("options.hideMatchedNames",(e=>e.hideMatchedNames),((e,t)=>{e.hideMatchedNames=t})),F.CHAT_COLOR=new I("options.chat.color",(e=>e.chatColor),((e,t)=>{e.chatColor=t})),F.CHAT_LINKS=new I("options.chat.links",(e=>e.chatLinks),((e,t)=>{e.chatLinks=t})),F.CHAT_LINKS_PROMPT=new I("options.chat.links.prompt",(e=>e.chatLinksPrompt),((e,t)=>{e.chatLinksPrompt=t})),F.DISCRETE_MOUSE_SCROLL=new I("options.discrete_mouse_scroll",(e=>e.discreteMouseScroll),((e,t)=>{e.discreteMouseScroll=t})),F.VSYNC=new I("options.vsync",(e=>e.vsync),((e,t)=>{e.vsync=t,Ie.getInstance().setFramerateLimit(e.framerateLimit)})),F.ENTITY_SHADOWS=new I("options.entityShadows",(e=>e.entityShadows),((e,t)=>{e.entityShadows=t})),F.FORCE_UNICODE_FONT=new I("options.forceUnicodeFont",(e=>e.forceUnicodeFont),((e,t)=>{e.forceUnicodeFont=t,Ie.getInstance().forceUnicodeFont(t)})),F.INVERT_MOUSE=new I("options.invertMouse",(e=>e.invertMouse),((e,t)=>{e.invertMouse=t})),F.REALMS_NOTIFICATIONS=new I("options.realmsNotifications",(e=>e.realmsNotifications),((e,t)=>{e.realmsNotifications=t})),F.REDUCED_DEBUG_INFO=new I("options.reducedDebugInfo",(e=>e.reducedDebugInfo),((e,t)=>{e.reducedDebugInfo=t})),F.SHOW_SUBTITLES=new I("options.showSubtitles",(e=>e.showSubtitles),((e,t)=>{e.showSubtitles=t})),F.SNOOPER=new I("options.snooper",(e=>!1),((e,t)=>{e.snooper=t})),F.TOUCHSCREEN=new I("options.touchscreen",(e=>e.touchscreen),((e,t)=>{e.touchscreen=t})),F.FULLSCREEN=new I("options.fullscreen",(e=>e.fullscreen),((e,t)=>{let i=document.documentElement;t?document.fullscreenElement||i.requestFullscreen():document.fullscreenElement&&document.exitFullscreen(),e.fullscreen=t})),F.VIEW_BOBBING=new I("options.viewBobbing",(e=>e.viewBobbing),((e,t)=>{e.viewBobbing=t})),F.AUTO_JUMP=new I("options.autoJump",(e=>e.autoJump),((e,t)=>{e.autoJump=t})),F.SHOW_FPS=new I("Show FPS",(e=>e.showFPS),((e,t)=>{e.showFPS=t})),F.HIDE_GUI=new I("Hide GUI",(e=>e.hideGUI),((e,t)=>{e.hideGUI=t})),F.SKIP_MULTIPLAYER_WARNING=new I("Skip Multiplayer Warning",(e=>e.skipMultiplayerWarning),((e,t)=>{e.skipMultiplayerWarning=t})),F.ADVANCED_TOOLTIPS=new I("Advanced tooltips",(e=>e.advancedItemTooltips),((e,t)=>{e.advancedItemTooltips=t})),F.HELD_TOOLTIPS=new I("Held tooltips",(e=>e.heldItemTooltips),((e,t)=>{e.heldItemTooltips=t})),F.HIDE_MATCHED_NAMES=new I("options.hideMatchedNames",(e=>e.hideMatchedNames),((e,t)=>{e.hideMatchedNames=t})),F.AO=new E("options.ao",((e,t)=>{e.ambientOcclusionStatus=w.byId(e.ambientOcclusionStatus.getId()+t)}),((e,t)=>t.getGenericValueComponent(s.getTranslation(e.ambientOcclusionStatus.getKey())))),F.ATTACK_INDICATOR=new E("options.attackIndicator",((e,t)=>{e.attackIndicator=_.byId(e.attackIndicator.getId()+t)}),((e,t)=>t.getGenericValueComponent(s.getTranslation(e.attackIndicator.getKey())))),F.CHAT_VISIBILITY=new E("options.chat.visibility",((e,t)=>{e.chatVisibility=T.byId(e.chatVisibility.getId()+t)}),((e,t)=>t.getGenericValueComponent(e.chatVisibility.getKey()))),F.MAIN_HAND=new E("options.mainHand",((e,t)=>{e.mainHand=v.byId(e.narrator.getId()+t)}),((e,t)=>t.getGenericValueComponent(e.mainHand.getKey()))),F.NARRATOR=new E("options.narrator",((e,t)=>{e.narrator=k.byId(e.narrator.getId()+t)}),((e,t)=>t.getGenericValueComponent(e.narrator.getKey()))),F.PARTICLES=new E("options.particles",((e,t)=>{e.particles=L.byId(e.particles.getId()+t)}),((e,t)=>t.getGenericValueComponent(s.getTranslation(e.particles.getKey())))),F.RENDER_CLOUDS=new E("options.renderClouds",((e,t)=>{e.cloudOption=C.byId(e.cloudOption.getId()+t)}),((e,t)=>t.getGenericValueComponent(s.getTranslation(e.cloudOption.getKey())))),F.ACCESSIBILITY_TEXT_BACKGROUND=new E("options.accessibility.text_background",((e,t)=>{e.accessibilityTextBackground=!e.accessibilityTextBackground}),((e,t)=>t.getGenericValueComponent(s.getTranslation(e.accessibilityTextBackground?"options.accessibility.text_background.chat":"options.accessibility.text_background.everywhere")))),F.GUI_SCALE=new E("options.guiScale",((e,t)=>{e.guiScale=(e.guiScale+t)%Ie.getInstance().getMainCanvas().calcGuiScale(0,Ie.getInstance().getForceUnicodeFont())}),((e,t)=>0==e.guiScale?t.getGenericValueComponent(s.getTranslation("options.guiScale.auto")):t.getMessageWithValue(e.guiScale))),F.SNEAK=new E("key.sneak",((e,t)=>{e.toggleCrouch=!e.toggleCrouch}),((e,t)=>t.getGenericValueComponent(s.getTranslation(e.toggleCrouch?"options.key.toggle":"options.key.hold")))),F.SPRINT=new E("key.sprint",((e,t)=>{e.toggleSprint=!e.toggleSprint}),((e,t)=>t.getGenericValueComponent(s.getTranslation(e.toggleSprint?"options.key.toggle":"options.key.hold")))),F.GRAPHICS_FANCINESS=new E("options.graphics",((e,t)=>{e.graphicFanciness=b.byId(e.graphicFanciness.getId()+t)}),((e,t)=>t.getGenericValueComponent(s.getTranslation(e.graphicFanciness.getKey())))),F.POINT_OF_VIEW=new E("POINT_OF_VIEW",((e,t)=>{e.pointOfView=O.byId(e.pointOfView.getId()+t)}),((e,t)=>t.getGenericValueComponent(s.getTranslation(e.pointOfView.getKey())))),F.CHAT_SCALE=new D("options.chat.scale",0,1,0,(e=>e.chatScale),((e,t)=>{e.chatScale=t}),((e,t)=>{let i=t.normalizeValue(t.get(e));return 0==i?s.getTranslation(t.getBaseMessageTranslation())+": "+s.getTranslation(!0===t.get(e)?"options.on":"options.off"):t.getPercentValueComponent(i)})),F.CHAT_OPACITY=new D("options.chat.opacity",0,1,0,(e=>e.chatOpacity),((e,t)=>{e.chatOpacity=t}),((e,t)=>{let i=t.normalizeValue(t.get(e));return t.getPercentValueComponent(.9*i+.1)})),F.LINE_SPACING=new D("options.chat.line_spacing",0,1,0,(e=>e.chatLineSpacing),((e,t)=>{e.chatLineSpacing=t}),((e,t)=>t.getPercentValueComponent(t.normalizeValue(t.get(e))))),F.FOV_EFFECT_SCALE_SLIDER=new D("options.fovEffectScale",0,1,0,(e=>Math.pow(e.fovScaleEffect,2)),((e,t)=>{e.fovScaleEffect=f.sqrt(t)}),((e,t)=>{let i=t.normalizeValue(t.get(e));return 0==i?t.getGenericValueComponent(s.getTranslation("options.fovEffectScale.off")):t.getPercentValueComponent(i)})),F.SCREEN_EFFECT_SCALE_SLIDER=new D("options.screenEffectScale",0,1,0,(e=>e.screenEffectScale),((e,t)=>{e.screenEffectScale=t}),((e,t)=>{let i=t.normalizeValue(t.get(e));return 0==i?t.getGenericValueComponent(s.getTranslation("options.screenEffectScale.off")):t.getPercentValueComponent(i)})),F.DELAY_INSTANT=new D("options.chat.delay_instant",0,6,.1,(e=>e.chatDelay),((e,t)=>{e.chatDelay=t}),((e,t)=>{let i=t.get(e);return i<=0?s.getTranslation("options.chat.delay_none"):s.getTranslation("options.chat.delay").replace("%s",i.toFixed(1))})),F.ACCESSIBILITY_TEXT_BACKGROUND_OPACITY=new D("options.accessibility.text_background_opacity",0,1,0,(e=>e.accessibilityTextBackgroundOpacity),((e,t)=>{e.accessibilityTextBackgroundOpacity=t}),((e,t)=>t.getPercentValueComponent(t.normalizeValue(t.get(e))))),F.CHAT_WIDTH=new D("options.chat.width",0,1,0,(e=>e.chatWidth),((e,t)=>{e.chatWidth=t}),((e,t)=>{const i=t.normalizeValue(t.get(e));return t.getPixelValueComponent(Math.floor(280*i+40))})),F.CHAT_HEIGHT_FOCUSED=new D("options.chat.height.focused",0,1,0,(e=>e.chatHeightFocused),((e,t)=>{e.chatHeightFocused=t}),((e,t)=>{const i=t.normalizeValue(t.get(e));return t.getPixelValueComponent(Math.floor(160*i+20))})),F.CHAT_HEIGHT_UNFOCUSED=new D("options.chat.height.unfocused",0,1,0,(e=>e.chatHeightUnfocused),((e,t)=>{e.chatHeightUnfocused=t}),((e,t)=>{const i=t.normalizeValue(t.get(e));return t.getPixelValueComponent(Math.floor(160*i+20))})),F.RENDER_DISTANCE=new D("options.renderDistance",2,64,1,(e=>e.renderDistanceChunks),((e,t)=>{e.renderDistanceChunks=t}),((e,t)=>{const i=t.get(e);return t.getGenericValueComponent(s.getTranslation("options.chunks").replace("%s",i))})),F.ENTITY_DISTANCE_SCALING=new D("options.entityDistanceScaling",.5,5,.25,(e=>e.entityDistanceScaling),((e,t)=>{e.entityDistanceScaling=t}),((e,t)=>{const i=t.get(e);return t.getPercentValueComponent(i)})),F.GAMMA=new D("options.gamma",0,1,0,(e=>e.gamma),((e,t)=>{e.gamma=t}),((e,t)=>{const i=t.normalizeValue(t.get(e));return 0==i?t.getGenericValueComponent(s.getTranslation("options.gamma.min")):1==i?t.getGenericValueComponent(s.getTranslation("options.gamma.max")):t.getPercentageAddMessage(100*i)})),F.MIPMAP_LEVELS=new D("options.mipmapLevels",0,4,1,(e=>e.mipmapLevels),((e,t)=>{e.mipmapLevels=t}),((e,t)=>{const i=t.get(e);return 0==i?`${t.getBaseMessageTranslation()}: ${s.getTranslation("options.off")}`:t.getMessageWithValue(i)})),F.FRAMERATE_LIMIT=new D("options.framerateLimit",5,260,5,(e=>e.framerateLimit),((e,t)=>{e.framerateLimit=t,Ie.getInstance().setFramerateLimit(e.framerateLimit)}),((e,t)=>{const i=t.get(e);return i==t.getMaxValue()?t.getGenericValueComponent(s.getTranslation("options.framerateLimit.max")):t.getGenericValueComponent(s.getTranslation("options.framerate").replace("%s",i))})),F.FOV=new D("options.fov",30,110,1,(e=>e.fov),((e,t)=>{e.fov=t}),((e,t)=>{const i=t.get(e);return 70==i?t.getGenericValueComponent(s.getTranslation("options.fov.min")):i==t.getMaxValue()?t.getGenericValueComponent(s.getTranslation("options.fov.max")):t.getMessageWithValue(~~i)})),F.SENSITIVITY=new D("options.sensitivity",0,1,0,(e=>e.mouseSensitivity),((e,t)=>{e.mouseSensitivity=t}),((e,t)=>{const i=t.normalizeValue(t.get(e));return 0==i?t.getGenericValueComponent(s.getTranslation("options.sensitivity.min")):1==i?t.getGenericValueComponent(s.getTranslation("options.sensitivity.max")):t.getPercentValueComponent(2*i)})),F.MOUSE_WHEEL_SENSITIVITY=new class extends D{constructor(e,t,i,s,n,r,a){super(e,t,i,s,n,r,a)}normalizeValue(e){return Math.log(e/this.minValue)/Math.log(this.maxValue/this.minValue)}denormalizeValue(e){return this.minValue*Math.pow(Math.E,Math.log(this.maxValue/this.minValue)*e)}}("options.mouseWheelSensitivity",.01,10,.01,(e=>e.mouseWheelSensitivity),((e,t)=>{e.mouseWheelSensitivity=t}),((e,t)=>{const i=t.normalizeValue(t.get(e));return t.getGenericValueComponent(t.denormalizeValue(i).toFixed(2))}));class B extends S{constructor(e,t,i){super(i),this.parentScreen=e,this.gameSettings=t}onClose(){}closeScreen(){this.minecraft.displayGuiScreen(this.parentScreen)}}class R extends B{constructor(e,t){super(e,t,s.getTranslation("options.language")),this.warningInfo=`(${s.getTranslation("options.languageWarning")})`}init(){this.forceUnicodeFontBtn=this.addButton(new y(this.width/2-155,this.height-38,150,20,F.FORCE_UNICODE_FONT,F.FORCE_UNICODE_FONT.getName(this.gameSettings),(e=>{F.FORCE_UNICODE_FONT.nextValue(this.gameSettings),e.setMessage(F.FORCE_UNICODE_FONT.getName(this.gameSettings)),this.gameSettings.saveOptions()}))),this.confirmSettingsBtn=this.addButton(new d(this.width/2-155+160,this.height-38,150,20,s.getTranslation("gui.done"),(e=>{this.minecraft.displayGuiScreen(this.parentScreen)}))),super.init()}render(e,t,i,s){this.renderBackground(e),this.drawCenteredString(e,this.font,this.title,this.width/2,20,16777215),this.drawCenteredString(e,this.font,this.warningInfo,this.width/2,this.height-56,8421504),super.render(e,t,i,s)}}class P extends S{constructor(e){super(),this.prevScreen=e,this.buttonsActive=!1}init(){super.init(),this.btnSelectServer=this.addButton(new d(this.width/2-154,this.height-52,100,20,s.getTranslation("selectServer.select"),(e=>{}))),this.addButton(new d(this.width/2-50,this.height-52,100,20,s.getTranslation("selectServer.direct"),(e=>{}))),this.addButton(new d(this.width/2+54,this.height-52,100,20,s.getTranslation("selectServer.add"),(e=>{this.buttonsActive=!this.buttonsActive,this.changeActive()}))),this.btnEditServer=this.addButton(new d(this.width/2-154,this.height-28,70,20,s.getTranslation("selectServer.edit"),(e=>{}))),this.btnDeleteServer=this.addButton(new d(this.width/2-74,this.height-28,70,20,s.getTranslation("selectServer.delete"),(e=>{}))),this.addButton(new d(this.width/2+4,this.height-28,70,20,s.getTranslation("selectServer.refresh"),(e=>{this.buttonsActive=!1,this.refreshServerList()}))),this.addButton(new d(this.width/2+80,this.height-28,75,20,s.getTranslation("gui.cancel"),(e=>{this.minecraft.displayGuiScreen(this.prevScreen)}))),this.changeActive()}refreshServerList(){this.minecraft.displayGuiScreen(new P(this.prevScreen))}changeActive(){this.btnEditServer.active=!1,this.btnSelectServer.active=!1,this.btnDeleteServer.active=!1,this.buttonsActive&&(this.btnEditServer.active=!0,this.btnSelectServer.active=!0,this.btnDeleteServer.active=!0)}keyPressed(e,t){return!!super.keyPressed(e,t)||"F5"===e&&(this.refreshServerList(),!0)}render(e,t,i,s){this.renderBackground(e),this.drawCenteredString(e,this.font,this.title,this.width/2,20,16777215),super.render(e,t,i,s)}}class G{static optionsEnabled(e){return e?G.OPTIONS_ON:G.OPTIONS_OFF}}G.OPTIONS_ON=new c("options.on"),G.OPTIONS_OFF=new c("options.off"),G.GUI_DONE=new c("gui.done"),G.GUI_CANCEL=new c("gui.cancel"),G.GUI_YES=new c("gui.yes"),G.GUI_NO=new c("gui.no"),G.GUI_PROCEED=new c("gui.proceed"),G.GUI_BACK=new c("gui.back"),G.CONNECTION_FAILED=new c("connect.failed");class V extends B{constructor(e,t){super(e,t,s.getTranslation("options.accessibility.title")),this.SCREEN_OPTIONS=[F.NARRATOR,F.SHOW_SUBTITLES,F.ACCESSIBILITY_TEXT_BACKGROUND_OPACITY,F.ACCESSIBILITY_TEXT_BACKGROUND,F.CHAT_OPACITY,F.LINE_SPACING,F.DELAY_INSTANT,F.AUTO_JUMP,F.SNEAK,F.SPRINT,F.FOV_EFFECT_SCALE_SLIDER,F.SCREEN_EFFECT_SCALE_SLIDER]}init(){this.tempAddOptions(this.SCREEN_OPTIONS),this.addButton(new d(this.width/2-100,this.height-27,200,20,s.getTranslation("gui.done"),(e=>{this.minecraft.displayGuiScreen(this.parentScreen)})))}render(e,t,i,s){this.renderBackground(e),this.drawCenteredString(e,this.font,this.title,this.width/2,20,16777215),super.render(e,t,i,s)}}class H extends B{constructor(e,t){super(e,t,s.getTranslation("options.chat.title")),this.SCREEN_OPTIONS=[F.CHAT_VISIBILITY,F.CHAT_COLOR,F.CHAT_LINKS,F.CHAT_LINKS_PROMPT,F.CHAT_OPACITY,F.ACCESSIBILITY_TEXT_BACKGROUND_OPACITY,F.CHAT_SCALE,F.LINE_SPACING,F.DELAY_INSTANT,F.CHAT_WIDTH,F.CHAT_HEIGHT_FOCUSED,F.CHAT_HEIGHT_UNFOCUSED,F.NARRATOR,F.AUTO_SUGGEST_COMMANDS,F.HIDE_MATCHED_NAMES,F.REDUCED_DEBUG_INFO]}init(){let e=0;for(const t of this.SCREEN_OPTIONS){let i=this.width/2-155+e%2*160,s=this.height/6-12+24*(e>>1);this.addButton(t.createWidget(this.minecraft.gameSettings,i,s,150)),e++}this.addButton(new d(this.width/2-100,this.height-27,200,20,s.getTranslation("gui.done"),(e=>{this.minecraft.displayGuiScreen(this.parentScreen)})))}render(e,t,i,s){this.renderBackground(e),this.drawCenteredString(e,this.font,this.title,this.width/2,20,16777215),super.render(e,t,i,s)}}class U extends B{constructor(e,t){super(e,t,s.getTranslation("options.mouse_settings.title"))}init(){this.addButton(new d(this.width/2-100,this.height-27,200,20,s.getTranslation("gui.done"),(e=>{this.minecraft.displayGuiScreen(this.parentScreen)})))}render(e,t,i,s){this.renderBackground(e),this.drawCenteredString(e,this.font,this.title,this.width/2,5,16777215),super.render(e,t,i,s)}}class W extends B{constructor(e,t){super(e,t,s.getTranslation("controls.title"))}init(){this.addButton(new d(this.width/2-155,18,150,20,s.getTranslation("options.mouse_settings"),(e=>{this.minecraft.displayGuiScreen(new U(this,this.gameSettings))}))),this.buttonReset=this.addButton(new d(this.width/2-155,this.height-29,150,20,s.getTranslation("controls.resetAll"),(e=>{}))),this.addButton(new d(this.width/2+5,this.height-29,150,20,s.getTranslation("gui.done"),(e=>{this.minecraft.displayGuiScreen(this.parentScreen)})))}render(e,t,i,s){this.renderBackground(e),this.drawCenteredString(e,this.font,this.title,this.width/2,8,16777215),this.buttonReset.active=!1,super.render(e,t,i,s)}}class K{constructor(e,t){this.partId=e,this.partMask=1<<e,this.partName=t,this.name="options.modelPart."+t}getPartMask(){return this.partMask}getPartName(){return this.partName}getName(){return this.name}}K.CAPE=new K(0,"cape"),K.JACKET=new K(1,"jacket"),K.LEFT_SLEEVE=new K(2,"left_sleeve"),K.RIGHT_SLEEVE=new K(3,"right_sleeve"),K.LEFT_PANTS_LEG=new K(4,"left_pants_leg"),K.RIGHT_PANTS_LEG=new K(5,"right_pants_leg"),K.HAT=new K(6,"hat");class Y extends B{constructor(e,t){super(e,t,s.getTranslation("options.skinCustomisation.title"))}init(){let e=0;for(const t of Object.values(K))this.addButton(new d(this.width/2-155+e%2*160,this.height/6+24*(e>>1),150,20,this.getOptionMessage(t),(e=>{this.gameSettings.switchModelPartEnabled(t),e.setMessage(this.getOptionMessage(t))}))),++e;this.addButton(new y(this.width/2-155+e%2*160,this.height/6+24*(e>>1),150,20,F.MAIN_HAND,F.MAIN_HAND.getName(this.gameSettings),(e=>{F.MAIN_HAND.setValueIndex(this.gameSettings,1),this.gameSettings.saveOptions(),e.setMessage(F.MAIN_HAND.getName(this.gameSettings))}))),++e,e%2==1&&++e,this.addButton(new d(this.width/2-100,this.height/6+24*(e>>1),200,20,s.getTranslation("gui.done"),(e=>{this.minecraft.displayGuiScreen(this.parentScreen)})))}render(e,t,i,s){this.renderBackground(e),this.drawCenteredString(e,this.font,this.title,this.width/2,20,16777215),super.render(e,t,i,s)}getOptionMessage(e){return`${s.getTranslation(e.getName())}: ${s.getTranslation(this.gameSettings.getModelParts().has(e)?"options.on":"options.off")}`}}class q extends B{constructor(e,t){super(e,t,s.getTranslation("Debug")),this.SCREEN_OPTIONS=[F.SHOW_FPS,F.ADVANCED_TOOLTIPS,F.HELD_TOOLTIPS,F.HIDE_GUI,F.POINT_OF_VIEW,F.SNOOPER,F.SKIP_MULTIPLAYER_WARNING]}init(){let e=0;for(const t of this.SCREEN_OPTIONS){let i=this.width/2-155+e%2*160,s=this.height/6-12+24*(e>>1);this.addButton(t.createWidget(this.minecraft.gameSettings,i,s,150)),e++}this.addButton(new d(this.width/2-100,this.height-27,200,20,s.getTranslation("gui.done"),(e=>{this.minecraft.displayGuiScreen(this.parentScreen)})))}render(e,t,i,s){this.renderBackground(e),this.drawCenteredString(e,this.font,this.title,this.width/2,20,16777215),super.render(e,t,i,s)}}class z extends N{constructor(e,t,i,s,n){super(e.gameSettings,t,i,n,20,e.gameSettings.getSoundLevel(s)),this.category=s,this.setName()}setSaveOptionValue(){this.settings.setSoundLevel(this.category,this.sliderValue),this.settings.saveOptions()}setName(){let e=String(0===this.sliderValue?G.OPTIONS_OFF.getTranslatedKey():String(Math.ceil(100*this.sliderValue)+"%"));this.setMessage(s.getTranslation("soundCategory."+this.category.getName())+": "+e)}}class $ extends B{constructor(e,t){super(e,t,s.getTranslation("options.sounds.title"))}init(){let e=0;this.addButton(new z(this.minecraft,this.width/2-155+e%320,this.height/6-12+24*(e>>1),h.MASTER,310)),e+=2;for(let t=0;t<Object.values(h).length;t++)if(0!==t&&t!==Object.values(h).length-1){const i=Object.values(h)[t];this.addButton(new z(this.minecraft,this.width/2-155+e%2*160,this.height/6-12+24*(e>>1),i,150)),++e}e++;const t=this.width/2-75,i=this.height/6-12;this.addButton(new d(t-25,i+180,200,20,s.getTranslation("gui.done"),(e=>{this.minecraft.displayGuiScreen(this.parentScreen)})))}render(e,t,i,s){this.renderBackground(e),this.drawCenteredString(e,this.font,this.title,this.width/2,15,16777215),super.render(e,t,i,s)}}class j extends B{constructor(e,t){super(e,t,s.getTranslation("options.videoTitle")),this.OPTIONS=[F.GRAPHICS_FANCINESS,F.RENDER_DISTANCE,F.AO,F.FRAMERATE_LIMIT,F.VSYNC,F.VIEW_BOBBING,F.GUI_SCALE,F.ATTACK_INDICATOR,F.GAMMA,F.RENDER_CLOUDS,F.FULLSCREEN,F.PARTICLES,F.MIPMAP_LEVELS,F.ENTITY_SHADOWS,F.SCREEN_EFFECT_SCALE_SLIDER,F.ENTITY_DISTANCE_SCALING,F.FOV_EFFECT_SCALE_SLIDER]}init(){let e=0;for(const t of this.OPTIONS){let i=this.width/2-155+e%2*160,s=this.height/6-12+24*(e>>1);this.addButton(t.createWidget(this.minecraft.gameSettings,i,s,150)),e++}this.addButton(new d(this.width/2-100,this.height-27,200,20,s.getTranslation("gui.done"),(e=>{this.minecraft.displayGuiScreen(this.parentScreen)})))}mouseClicked(e,t,i){let s=this.gameSettings.guiScale;return!!super.mouseClicked(e,t,i)&&(this.gameSettings.guiScale!=s&&this.minecraft.updateWindowSize(),!0)}render(e,t,i,s){this.renderDirtBackground(e,0),this.drawCenteredString(e,this.font,this.title,this.width/2,5,16777215),super.render(e,t,i,s)}}class X extends S{constructor(e,t){super(s.getTranslation("options.title")),this.parentScreen=e,this.settings=t}closeScreen(){this.minecraft.displayGuiScreen(this.parentScreen)}init(){let e=0;for(let t of X.SCREEN_OPTIONS){let i=this.width/2-155+e%2*160,s=this.height/6-12+24*(e>>1);this.addButton(t.createWidget(this.minecraft.gameSettings,i,s,150)),++e}const t=this.height/6-6,i=this.width/2-155,n=i+160;null==this.minecraft.world&&this.addButton(new y(this.width/2-155+e%2*160,this.height/6-12+24*(e>>1),150,20,F.REALMS_NOTIFICATIONS,F.REALMS_NOTIFICATIONS.getName(this.settings),(e=>{F.REALMS_NOTIFICATIONS.nextValue(this.settings),this.settings.saveOptions(),e.setMessage(F.REALMS_NOTIFICATIONS.getName(this.settings))}))),this.addButton(new d(i,t+24,150,20,s.getTranslation("Debug"),(()=>{this.minecraft.displayGuiScreen(new q(this,this.settings))}))),this.addButton(new d(i,t+48,150,20,s.getTranslation("options.skinCustomisation"),(()=>{this.minecraft.displayGuiScreen(new Y(this,this.settings))}))),this.addButton(new d(n,t+48,150,20,s.getTranslation("options.sounds"),(()=>{this.minecraft.displayGuiScreen(new $(this,this.settings))}))),this.addButton(new d(i,t+72,150,20,s.getTranslation("options.video"),(()=>{this.minecraft.displayGuiScreen(new j(this,this.settings))}))),this.addButton(new d(n,t+72,150,20,s.getTranslation("options.controls"),(()=>{this.minecraft.displayGuiScreen(new W(this,this.settings))}))),this.addButton(new d(i,t+96,150,20,s.getTranslation("options.language"),(()=>{this.minecraft.displayGuiScreen(new R(this,this.settings))}))),this.addButton(new d(n,t+96,150,20,s.getTranslation("options.chat.title"),(()=>{this.minecraft.displayGuiScreen(new H(this,this.settings))}))),this.addButton(new d(i,t+120,150,20,s.getTranslation("options.resourcepack"),(()=>{this.minecraft.testSwitchLang()}))),this.addButton(new d(n,t+120,150,20,s.getTranslation("options.accessibility.title"),(()=>{this.minecraft.displayGuiScreen(new V(this,this.settings))}))),this.addButton(new d(this.width/2-100,t+174,200,20,G.GUI_DONE,(()=>{this.minecraft.displayGuiScreen(this.parentScreen)})))}render(e,t,i,s){this.renderBackground(e),this.drawCenteredString(e,this.font,this.title,this.width/2,15,16777215),super.render(e,t,i,s)}}X.SCREEN_OPTIONS=[F.FOV];class J extends S{constructor(e){super(""),this.splashText="",this.showFadeInAnimation=!1,this.firstRenderTime=0,this.widthCopyright=0,this.widthCopyrightRest=0,e&&(this.showFadeInAnimation=e),this.showTitleWronglySpelled=Number(Math.random().toFixed(1))<.1}isPauseScreen(){return!1}shouldCloseOnEsc(){return!1}tick(){}init(){""===this.splashText&&(this.splashText=this.minecraft.getSplashes().getSplashText()),this.widthCopyright=this.font.getTextWidth("Copyright Mojang AB. Do not distribute!"),this.widthCopyrightRest=this.width-this.widthCopyright-2;const e=~~this.height/4+48;this.minecraft.getIsDemo()?this.addDemoButtons(e,24):this.addSingleplayerMultiplayerButtons(e,24),this.addButton(new m(this.width/2-124,e+72+12,20,20,0,106,20,d.WIDGETS_LOCATION,256,256,(e=>{this.minecraft.displayGuiScreen(new R(this,this.minecraft.gameSettings))}),"")),this.addButton(new d(this.width/2-100,e+72+12,98,20,new c("menu.options"),(e=>{this.minecraft.displayGuiScreen(new X(this,this.minecraft.gameSettings))}))),this.addButton(new d(this.width/2+2,e+72+12,98,20,new c("menu.quit"),(e=>{this.minecraft.shutdown()}))),this.addButton(new m(this.width/2+104,e+72+12,20,20,0,0,20,J.ACCESSIBILITY_TEXTURES,32,64,(e=>{}),""))}addSingleplayerMultiplayerButtons(e,t){this.addButton(new d(this.width/2-100,e,200,20,new c("menu.singleplayer"),(e=>{this.minecraft.testSwitchLang()})));const i=this.minecraft.isMultiplayerEnabled();this.addButton(new d(this.width/2-100,e+1*t,200,20,new c("menu.multiplayer"),(e=>{this.minecraft.displayGuiScreen(new P(this))}))).active=i,this.addButton(new d(this.width/2-100,e+2*t,200,20,new c("Reload Resources"),(e=>{this.minecraft.loadResources()}))).active=i}addDemoButtons(e,t){this.addButton(new d(this.width/2-100,e,200,20,new c("menu.playdemo"),(e=>{}))),this.buttonResetDemo=this.addButton(new d(this.width/2-100,e+1*t,200,20,new c("menu.resetdemo"),(e=>{}))),this.buttonResetDemo.active=!1}render(e,t,i,n){e.fillStyle=a.getColor(3289650),e.fillRect(0,0,this.width,this.height),0===this.firstRenderTime&&this.showFadeInAnimation&&(this.firstRenderTime=s.milliTime());let r=this.showFadeInAnimation?(s.milliTime()-this.firstRenderTime)/1e3:1;r<0&&(this.showFadeInAnimation=!1);let h=this.showFadeInAnimation?r:1;this.showFadeInAnimation&&(e.globalAlpha=h);let u=this.width/2-137;try{const t=this.minecraft.getTextureManager().getTexture(J.MINECRAFT_TITLE_TEXTURES),i=(e,i,s,n,r)=>{this.minecraft.textureBuffer.add(e,l.createBuffer(n,r,(e=>{l.blit(e,t,0,0,i,s,n,r),e.globalCompositeOperation="source-in",e.fillStyle="black",e.fillRect(0,0,n,r)})))};if(this.showTitleWronglySpelled)if(this.minecraft.textureBuffer.has("mcwstitle_0")){let i=this.minecraft.textureBuffer.get("mcwstitle_0"),s=this.minecraft.textureBuffer.get("mcwstitle_1"),n=this.minecraft.textureBuffer.get("mcwstitle_2"),r=this.minecraft.textureBuffer.get("mcwstitle_3"),a=this.minecraft.textureBuffer.get("mcwstitle_4");l.blit(e,i,u,30,0,0,99,44),l.blit(e,i,u+1,31,0,0,99,44),l.blit(e,i,u+1,29,0,0,99,44),l.blit(e,s,u+99+1,30,0,0,27,44),l.blit(e,s,u+99,31,0,0,27,44),l.blit(e,s,u+99,29,0,0,27,44),l.blit(e,n,u+99+26,30,0,0,3,44),l.blit(e,n,u+99+26+1,31,0,0,3,44),l.blit(e,n,u+99+26+1,29,0,0,3,44),l.blit(e,r,u+99+26+3,30,0,0,26,44),l.blit(e,r,u+99+26+3+1,31,0,0,26,44),l.blit(e,r,u+99+26+3+1,29,0,0,26,44),l.blit(e,a,u+155+1,30,0,0,155,44),l.blit(e,a,u+155,31,0,0,155,44),l.blit(e,a,u+155,29,0,0,155,44),l.blit(e,t,u+1,30,0,0,99,44),l.blit(e,t,u+99+1,30,129,0,27,44),l.blit(e,t,u+99+26+1,30,126,0,3,44),l.blit(e,t,u+99+26+3+1,30,99,0,26,44),l.blit(e,t,u+155,30,0,45,155,44)}else i("mcwstitle_0",0,0,99,44),i("mcwstitle_1",129,0,27,44),i("mcwstitle_2",126,0,3,44),i("mcwstitle_3",99,0,26,44),i("mcwstitle_4",0,45,155,44);else if(this.minecraft.textureBuffer.has("mctitle_0")||this.minecraft.textureBuffer.has("mctitle_1")){let i=this.minecraft.textureBuffer.get("mctitle_0"),s=this.minecraft.textureBuffer.get("mctitle_1");l.blit(e,i,u,30,0,0,155,44),l.blit(e,i,u+1,29,0,0,155,44),l.blit(e,i,u+1,31,0,0,155,44),l.blit(e,s,u+155+1,30,0,0,155,44),l.blit(e,s,u+155+1,29,0,0,155,44),l.blit(e,s,u+155+1,31,0,0,155,44),l.blit(e,t,u+1,30,0,0,155,44),l.blit(e,t,u+155,30,0,45,155,44)}else i("mctitle_0",0,0,155,44),i("mctitle_1",0,45,155,44);const s=this.minecraft.getTextureManager().getTexture(J.MINECRAFT_TITLE_EDITION);l.blit(e,s,u+88,67,0,0,98,14)}catch(e){console.log("Failed to render buffer")}e.save();let g={x:u+240,y:59,width:this.font.getTextWidth(this.splashText),height:9};const d=s.milliTime();let m=1.5-Math.abs(.1*Math.sin(d%1e3/1e3*(2*Math.PI)));m=100*m/(this.font.getTextWidth(this.splashText)+32),o.rotateScale(e,-20*Math.PI/180,g.x,g.y,m),this.drawCenteredString(e,this.font,this.splashText,g.x,g.y,16776960),e.restore();let p="Minecraft TS "+this.minecraft.getVersion();this.minecraft.getIsDemo()?p+=" Demo":p+="release"===this.minecraft.getVersionType()?"":"/"+this.minecraft.getVersionType(),p+=`/${this.minecraft.getPlayerName()}`,this.minecraft.isModdedClient()&&(p+=new c("menu.modded")),this.drawString(e,this.font,p,2,this.height-10,16777215),this.drawString(e,this.font,"Copyright Mojang AB. Do not distribute!",this.widthCopyrightRest,this.height-10,16777215),t>this.widthCopyrightRest&&t<this.widthCopyrightRest+this.widthCopyright&&i>this.height-10&&i<this.height&&o.fill(e,this.widthCopyrightRest,this.widthCopyrightRest+this.widthCopyright,this.height-1,1,16777215);for(const e of this.buttons)e.setAlpha(h);super.render(e,t,i,n)}mouseClicked(e,t,i){return!!super.mouseClicked(e,t,i)||(e>this.widthCopyrightRest&&e<this.widthCopyrightRest+this.widthCopyright&&t>this.height-10&&t<this.height&&this.minecraft.getSoundHandler().play(n.clickStereo,h.MASTER,.5),!1)}}J.ACCESSIBILITY_TEXTURES=new r("textures/gui/accessibility.png"),J.MINECRAFT_TITLE_TEXTURES=new r("textures/gui/title/minecraft.png"),J.MINECRAFT_TITLE_EDITION=new r("textures/gui/title/edition.png");class Z{constructor(e){this.mc=e}updateCameraAndRender(e,t,i){if(!this.mc.skipRenderWorld){const t=this.mc.mouseHelper.getMouseX()/this.mc.getMainCanvas().getGuiScaleFactor(),n=this.mc.mouseHelper.getMouseY()/this.mc.getMainCanvas().getGuiScaleFactor(),r=this.mc.context;if(i&&null!=this.mc.world&&(this.mc.gameSettings.hideGUI&&null==this.mc.currentScreen||this.mc.ingameGUI.renderIngameGui(r,e)),r.clearRect(0,0,window.innerWidth,window.innerHeight),null!=this.mc.loadingGui)try{this.mc.loadingGui.render(r,t,n,this.mc.getTickLength())}catch(e){}else if(null!==this.mc.currentScreen)try{this.mc.currentScreen.render(r,t,n,this.mc.getTickLength())}catch(e){s.createLog("Failed to render screen","\n\nScreen render details:",`\n\tScreen name: ${this.mc.currentScreen.getClassName()}`,"\n\nMouse location:",`\n\tScaled: (${t}, ${n}). Absolute: (${this.mc.mouseHelper.getMouseX()}, ${this.mc.mouseHelper.getMouseY()})`,"\n\nScreen size:",`\n\tScaled: (${this.mc.getMainCanvas().getScaledWidth()}, ${this.mc.getMainCanvas().getScaledHeight()}). Absolute: (${window.innerWidth}, ${window.innerHeight}). Scale factor of ${this.mc.getMainCanvas().getGuiScaleFactor()}`,"\n\nMore Details:",`\n\t${e}`),this.mc.displayGuiScreen(new J)}}}tick(){}}class Q{constructor(e,t,i){this.keyDescription=e,this.keyName=t,this.keyNameDefault=this.keyName,this.keyCategory=i,Q.KEYBIND_ARRAY.set(e,this),Q.HASH.set(this.keyName,this),Q.KEYBIND_SET.add(i)}}Q.KEYBIND_ARRAY=new Map,Q.HASH=new Map,Q.CATEGORY_ORDER=new Map([["key.categories.movement",1],["key.categories.gameplay",2],["key.categories.inventory",3],["key.categories.creative",4],["key.categories.multiplayer",5],["key.categories.ui",6],["key.categories.misc",7]]),Q.KEYBIND_SET=new Set;class ee{constructor(e,t){this.content=new Map,this.lsItem="",this.itemData="","create"===(null==t?void 0:t.toLowerCase())?(this.lsItem=e,this.itemData=""):"get"===(null==t?void 0:t.toLowerCase())&&localStorage.getItem(e).split("\n").forEach((e=>{""!==e&&this.content.set(e.split(":")[0],e.split(":")[1])}))}addLine(e){this.itemData+=""===this.itemData?e:"\n"+e}saveToLS(){localStorage.setItem(this.lsItem,this.itemData)}keySet(){return this.content.keys()}getString(e){return this.content.get(e)}}class te{constructor(e){this.soundLevels=new Map(Object.entries(h).slice(0,-1).map((e=>[e[1],1]))),this.setModelParts=new Set(Object.values(K)),this.graphicFanciness=b.FANCY,this.cloudOption=C.FANCY,this.ambientOcclusionStatus=w.MAX,this.attackIndicator=_.CROSSHAIR,this.narrator=k.OFF,this.chatVisibility=T.FULL,this.mainHand=v.LEFT,this.particles=L.ALL,this.pointOfView=O.FIRST_PERSON,this.mouseSensitivity=.5,this.renderDistanceChunks=-1,this.chatOpacity=1,this.chatLineSpacing=0,this.chatScale=.7,this.entityDistanceScaling=1,this.mipmapLevels=4,this.chatWidth=1,this.chatHeightUnfocused=.44366196,this.chatHeightFocused=1,this.chatDelay=0,this.accessibilityTextBackgroundOpacity=.5,this.advancedItemTooltips=!1,this.heldItemTooltips=!0,this.framerateLimit=60,this.showFPS=!0,this.skipMultiplayerWarning=!1,this.biomeBlendRadius=2,this.mouseWheelSensitivity=1,this.rawMouseInput=!0,this.autoJump=!0,this.autoSuggestCommands=!0,this.chatColor=!0,this.chatLinks=!0,this.chatLinksPrompt=!0,this.vsync=!0,this.entityShadows=!0,this.forceUnicodeFont=!1,this.invertMouse=!1,this.discreteMouseScroll=!1,this.realmsNotifications=!0,this.hideMatchedNames=!1,this.reducedDebugInfo=!1,this.snooper=!0,this.showSubtitles=!1,this.accessibilityTextBackground=!0,this.touchscreen=!1,this.fullscreen=!1,this.viewBobbing=!0,this.toggleCrouch=!1,this.toggleSprint=!1,this.language="en_us",this.hideGUI=!1,this.showDebugInfo=!1,this.fov=70,this.screenEffectScale=1,this.fovScaleEffect=1,this.gamma=1,this.guiScale=3,this.keyBindForward=new Q("key.forward","w","key.categories.movement"),this.keyBindLeft=new Q("key.left","a","key.categories.movement"),this.keyBindBack=new Q("key.back","s","key.categories.movement"),this.keyBindRight=new Q("key.right","d","key.categories.movement"),this.keyBindJump=new Q("key.jump"," ","key.categories.movement"),this.keyBindInventory=new Q("key.inventory","e","key.categories.inventory"),this.keyBindSwapHands=new Q("key.swapOffhand","f","key.categories.inventory"),this.keyBindDrop=new Q("key.drop","q","key.categories.inventory"),this.keyBindUseItem=new Q("key.use","button1","key.categories.gameplay"),this.keyBindAttack=new Q("key.attack","button0","key.categories.gameplay"),this.keyBindPickBlock=new Q("key.pickItem","button2","key.categories.gameplay"),this.keyBindChat=new Q("key.chat","t","key.categories.multiplayer"),this.keyBindPlayerList=new Q("key.playerlist","tab","key.categories.multiplayer"),this.keyBindCommand=new Q("key.command"," ","key.categories.multiplayer"),this.field_244602_au=new Q("key.socialInteractions","p","key.categories.multiplayer"),this.keyBindScreenshot=new Q("key.screenshot","F2","key.categories.misc"),this.keyBindTogglePerspective=new Q("key.togglePerspective","F5","key.categories.misc"),this.keyBindSmoothCamera=new Q("key.smoothCamera","","key.categories.misc"),this.keyBindFullscreen=new Q("key.fullscreen","F11","key.categories.misc"),this.keyBindSpectatorOutlines=new Q("key.spectatorOutlines","","key.categories.misc"),this.keyBindAdvancements=new Q("key.advancements","l","key.categories.misc"),this.keyBindSaveToolbar=new Q("key.saveToolbarActivator","x","key.categories.creative"),this.keyBindLoadToolbar=new Q("key.loadToolbarActivator","c","key.categories.creative"),this.mc=e,this.loadOptions(),console.log("Game settings loaded!")}loadOptions(){if(localStorage.getItem("Options")){const e=new ee("Options","get");for(const t of e.keySet()){const i=e.getString(t);try{"showFPS".equals(t)&&F.SHOW_FPS.set(this,i),"advancedItemTooltips".equals(t)&&F.ADVANCED_TOOLTIPS.set(this,i),"heldItemTooltips".equals(t)&&F.HELD_TOOLTIPS.set(this,i),"skipMultiplayerWarning".equals(t)&&F.SKIP_MULTIPLAYER_WARNING.set(this,i),"rawMouseInput".equals(t)&&F.RAW_MOUSE_INPUT.set(this,i),"autoJump".equals(t)&&F.AUTO_JUMP.set(this,i),"autoSuggestCommands".equals(t)&&F.AUTO_SUGGEST_COMMANDS.set(this,i),"chatColor".equals(t)&&F.CHAT_COLOR.set(this,i),"chatLinks".equals(t)&&F.CHAT_LINKS.set(this,i),"chatLinksPrompt".equals(t)&&F.CHAT_LINKS.set(this,i),"vsync".equals(t)&&F.VSYNC.set(this,i),"entityShadows".equals(t)&&F.ENTITY_SHADOWS.set(this,i),"forceUnicodeFont".equals(t)&&F.FORCE_UNICODE_FONT.set(this,i),"invertMouse".equals(t)&&F.INVERT_MOUSE.set(this,i),"discreteMouseScroll".equals(t)&&F.DISCRETE_MOUSE_SCROLL.set(this,i),"realmsNotifications".equals(t)&&F.REALMS_NOTIFICATIONS.set(this,i),"hideMatchedNames".equals(t)&&F.HIDE_GUI.set(this,i),"reducedDebugInfo".equals(t)&&F.REDUCED_DEBUG_INFO.set(this,i),"snooper".equals(t)&&F.SNOOPER.set(this,i),"showSubtitles".equals(t)&&F.SHOW_SUBTITLES.set(this,i),"backgroundForChatOnly".equals(t)&&(this.accessibilityTextBackground="true".equals(i)),"touchscreen".equals(t)&&F.TOUCHSCREEN.set(this,i),"fullscreen".equals(t)&&F.FULLSCREEN.set(this,i),"viewBobbing".equals(t)&&F.VIEW_BOBBING.set(this,i),"toggleCrouch".equals(t)&&(this.toggleCrouch="true".equals(i)),"toggleSprint".equals(t)&&(this.toggleSprint="true".equals(i)),"hideGUI".equals(t)&&F.HIDE_GUI.set(this,i),"showDebugInfo".equals(t)&&(this.showDebugInfo="true".equals(i)),"fov".equals(t)&&(this.fov=40*parseFloat(i)+70),"screenEffectScale".equals(t)&&(this.screenEffectScale=parseFloat(i)),"fovEffectScale".equals(t)&&(this.fovScaleEffect=parseFloat(i)),"biomeBlendRadius".equals(t)&&(this.biomeBlendRadius=parseInt(i)),"mouseWheelSensitivity".equals(t)&&(this.mouseWheelSensitivity=parseFloat(i)),"gamma".equals(t)&&(this.gamma=parseFloat(i)),"guiScale".equals(t)&&(this.guiScale=parseInt(i)),"mouseSensitivity".equals(t)&&(this.mouseSensitivity=parseFloat(i)),"renderDistanceChunks".equals(t)&&(this.renderDistanceChunks=parseInt(i)),"chatOpacity".equals(t)&&(this.chatOpacity=parseFloat(i)),"chatLineSpacing".equals(t)&&(this.chatLineSpacing=parseFloat(i)),"chatScale".equals(t)&&(this.chatScale=parseFloat(i)),"chatWidth".equals(t)&&(this.chatWidth=parseFloat(i)),"chatHeightUnfocused".equals(t)&&(this.chatHeightUnfocused=parseFloat(i)),"chatHeightFocused".equals(t)&&(this.chatHeightFocused=parseFloat(i)),"chatDelay".equals(t)&&(this.chatDelay=parseFloat(i)),"textBackgroundOpacity".equals(t)&&(this.accessibilityTextBackgroundOpacity=parseFloat(i)),"framerateLimit".equals(t)&&(this.framerateLimit=parseInt(i)),"language".equals(t)&&(this.language=i),"graphicsMode".equals(t)&&(this.graphicFanciness=b.byId(parseInt(i))),"renderClouds".equals(t)&&("true".equals(i)?this.cloudOption=C.FANCY:"false".equals(i)?this.cloudOption=C.OFF:"fast".equals(i)&&(this.cloudOption=C.FAST)),"ambientOcclusionStatus".equals(t)&&(this.ambientOcclusionStatus=w.byId(parseInt(i))),"attackIndicator".equals(t)&&(this.attackIndicator=_.byId(parseInt(i))),"narrator".equals(t)&&(this.narrator=k.byId(parseInt(i))),"chatVisibility".equals(t)&&(this.chatVisibility=T.byId(parseInt(i))),"mainHand".equals(t)&&(this.mainHand="left".equals(i)?v.LEFT:v.RIGHT),"particles".equals(t)&&(this.particles=L.byId(parseInt(i))),"pointOfView".equals(t)&&(this.pointOfView=O.byId(parseInt(i)));for(const e of Object.values(h).slice(0,-1))t.equals(`soundCategory_${e.getName()}`)&&this.soundLevels.set(e,parseFloat(i))}catch(e){console.warn("Skipping bad option: {}:{}",t,i)}}}}saveOptions(){const e=new ee("Options","create");try{switch(e.addLine("showFPS:"+F.SHOW_FPS.get(this)),e.addLine("skipMultiplayerWarning:"+F.SKIP_MULTIPLAYER_WARNING.get(this)),e.addLine("language:"+this.language),e.addLine("advancedItemTooltips:"+F.ADVANCED_TOOLTIPS.get(this)),e.addLine("heldItemTooltips:"+F.HELD_TOOLTIPS.get(this)),e.addLine("rawMouseInput:"+F.RAW_MOUSE_INPUT.get(this)),e.addLine("autoJump:"+F.AUTO_JUMP.get(this)),e.addLine("vsync:"+F.VSYNC.get(this)),e.addLine("forceUnicodeFont:"+F.FORCE_UNICODE_FONT.get(this)),e.addLine("showSubtitles:"+F.SHOW_SUBTITLES.get(this)),e.addLine("hideGUI:"+F.HIDE_GUI.get(this)),e.addLine("toggleCrouch:"+this.toggleCrouch),e.addLine("toggleSprint:"+this.toggleSprint),e.addLine("chatScale:"+this.chatScale),e.addLine("ambientOcclusionStatus:"+this.ambientOcclusionStatus.getId()),e.addLine("attackIndicator:"+this.attackIndicator.getId()),e.addLine("narrator:"+this.narrator.getId()),e.addLine("chatVisibility:"+this.chatVisibility.getId()),e.addLine("mainHand:"+(this.mainHand===v.LEFT?"left":"right")),e.addLine("particles:"+this.particles.getId()),e.addLine("pointOfView:"+this.pointOfView.getId()),e.addLine("mouseSensitivity:"+this.mouseSensitivity),e.addLine("renderDistanceChunks:"+this.renderDistanceChunks),e.addLine("chatOpacity:"+this.chatOpacity),e.addLine("chatLineSpacing:"+this.chatLineSpacing),e.addLine("chatScale:"+this.chatScale),e.addLine("chatWidth:"+this.chatWidth),e.addLine("chatHeightUnfocused:"+this.chatHeightUnfocused),e.addLine("chatHeightFocused:"+this.chatHeightFocused),e.addLine("chatDelay:"+this.chatDelay),e.addLine("textBackgroundOpacity:"+this.accessibilityTextBackgroundOpacity),e.addLine("framerateLimit:"+this.framerateLimit),e.addLine("biomeBlendRadius:"+this.biomeBlendRadius),e.addLine("mouseWheelSensitivity:"+this.mouseWheelSensitivity),e.addLine("autoSuggestCommands:"+F.AUTO_SUGGEST_COMMANDS.get(this)),e.addLine("chatColor:"+F.CHAT_COLOR.get(this)),e.addLine("chatLinks:"+F.CHAT_LINKS.get(this)),e.addLine("chatLinksPrompt:"+F.CHAT_LINKS_PROMPT.get(this)),e.addLine("entityShadows:"+F.ENTITY_SHADOWS.get(this)),e.addLine("invertMouse:"+F.INVERT_MOUSE.get(this)),e.addLine("discreteMouseScroll:"+F.DISCRETE_MOUSE_SCROLL.get(this)),e.addLine("realmsNotifications:"+F.REALMS_NOTIFICATIONS.get(this)),e.addLine("hideMatchedNames:"+this.hideMatchedNames),e.addLine("reducedDebugInfo:"+F.REDUCED_DEBUG_INFO.get(this)),e.addLine("snooper:"+F.SNOOPER.get(this)),e.addLine("backgroundForChatOnly:"+this.accessibilityTextBackground),e.addLine("touchscreen:"+F.TOUCHSCREEN.get(this)),e.addLine("fullscreen:false"),e.addLine("viewBobbing:"+F.VIEW_BOBBING.get(this)),e.addLine("showDebugInfo:"+this.showDebugInfo),e.addLine("fov:"+(this.fov-70)/40),e.addLine("screenEffectScale:"+this.screenEffectScale),e.addLine("fovScaleEffect:"+this.fovScaleEffect),e.addLine("gamma:"+this.gamma),e.addLine("guiScale:"+this.guiScale),e.addLine("graphicsMode:"+this.graphicFanciness.getId()),this.cloudOption){case C.FANCY:e.addLine("renderClouds:true");break;case C.FAST:e.addLine("renderClouds:fast");break;case C.OFF:e.addLine("renderClouds:false")}for(const t of Object.values(h).slice(0,-1))e.addLine(`soundCategory_${t.getName()}:`+this.getSoundLevel(t));e.saveToLS()}catch(e){console.error("Failed to save options",e)}}getSoundLevel(e){return this.soundLevels.get(e)}setSoundLevel(e,t){this.soundLevels.set(e,t)}changeGuiScale(e){this.guiScale=e}getModelParts(){const e=new Set;for(const t of this.setModelParts)e.add(t);return e}switchModelPartEnabled(e){this.getModelParts().has(e)?this.setModelParts.delete(e):this.setModelParts.add(e)}}class ie{constructor(){this.asciiChars=[],this.accentedChars=[],this.asciiCharsStore={},this.accentedCharsStore={},this.allCharsStore={},this.characterBuffer=new se,this.useDefaultFont=!1}load(){return function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const e=yield fetch(new r("font/default.json").getFullPath()),t=yield e.json();this.ref=t;let i=Ie.getInstance();this.fonts={ascii:i.getTextureManager().getTexture(new r("textures/font/ascii.png")),accented:i.getTextureManager().getTexture(new r("textures/font/accented.png"))},this.ref.providers[2].chars.forEach((e=>{e.split("").forEach((e=>{this.asciiChars.push(e)}))})),this.asciiChars.forEach((e=>{this.asciiCharsStore[e]=new ne("ascii",this.fonts,this.asciiChars,e)})),this.ref.providers[1].chars.forEach((e=>{e.split("").forEach((e=>{this.accentedChars.push(e)}))})),this.accentedChars.forEach((e=>{this.accentedCharsStore[e]=new ne("accented",this.fonts,this.accentedChars,e)})),Object.entries(this.asciiCharsStore).forEach((([e,t])=>{this.allCharsStore[e]||(this.allCharsStore[e]=t)})),Object.entries(this.accentedCharsStore).forEach((([e,t])=>{this.allCharsStore[e]||(this.allCharsStore[e]=t)}))}))}drawStringWithShadow(e,t,i,s,n){const r="number"==typeof n?a.getColor(n):n,o="number"==typeof n?a.getDarkerColor(n):"black",h=t instanceof c?t.getTranslatedKey():t;if(this.useDefaultFont)return e.font="10px Arial",e.fillStyle=o,e.fillText(h,i+.8,s+7.8),e.fillStyle=r,void e.fillText(h,i,s+7);for(let t=0,n=i;t<h.length;t++){let i=h[t],a=this.allCharsStore[i];if(null===this.characterBuffer.get(i,r).src)this.characterBuffer.add(this.allCharsStore[i],r),null===this.characterBuffer.get(i,o).src&&this.characterBuffer.add(this.allCharsStore[i],o);else{let t="ascii"==a.type?0:3;e.drawImage(this.characterBuffer.get(i,o).src,n+1,s+1-t),e.drawImage(this.characterBuffer.get(i,r).src,n,s-t),n+=a.width," "!==i&&n--}}}getTextWidth(e){const t=e instanceof c?e.getTranslatedKey():e;if(this.useDefaultFont){let e=Ie.getInstance().context;return e.font="10px",e.measureText(t).width}let i=0;for(let e=0;e<t.length;e++)try{i+=this.allCharsStore[t[e]].width-1}catch(e){ie.hasCatchedError||(ie.hasCatchedError=!0,s.createLog("Char not found!"))}return i}changeForceUnicodeFont(e){this.useDefaultFont=e}}ie.hasCatchedError=!1;class se{constructor(){this.buffer={}}add(e,t){if(this.buffer[e.char]||(this.buffer[e.char]={}),!this.buffer[e.char][t]){const i=document.createElement("canvas"),s=i.getContext("2d");i.width=e.width,i.height=e.height,s.save(),s.globalAlpha=1,s.drawImage(e.fontImg,e.xUV,e.yUV,e.width,e.height,0,0,e.width,e.height),s.globalCompositeOperation="source-in",s.fillStyle=t,s.fillRect(0,0,e.width,e.height),s.restore(),this.buffer[e.char][t]=s.canvas}}get(e,t){let i=null;return this.buffer[e]&&this.buffer[e][t]&&(i=this.buffer[e][t]),{char:e,color:t,src:i}}}se.hasCatchedError=!1;class ne{constructor(e,t,i,s){this.type=e,this.fontImg=t[e],this.char=s,this.baseWidth="ascii"==e?7:10,this.baseHeight="ascii"==e?8:12,this.width=7,Object.entries({i:3,ì:3,í:3,".":3,"'":3,":":3,",":2,f:6,k:6,"(":5," ":4,l:4,"`":5,t:5,I:5,'"':5}).forEach((([e,t])=>e==s?this.width=t:null)),this.height="ascii"==e?8:12;let n=i.findIndex((e=>e==s));this.yIndex=Number(~~(n/16)),this.xIndex=Number(n%16),this.xUV=this.xIndex+this.xIndex*this.baseWidth,this.yUV=this.yIndex*this.baseHeight,"accented"==this.type&&(this.yIndex=Number(~~(n/16)),this.xIndex=Number(n%16),this.xUV=this.xIndex+this.xIndex*(this.baseWidth-2),this.yUV=this.yIndex*this.baseHeight)}}class re{constructor(e){this.ticks=0,this.mc=e}renderIngameGui(e,t){}tick(){}getTicks(){return this.ticks}reset(){}}class ae extends S{constructor(e){super(),this.isFullMenu=e}init(){this.isFullMenu&&this.addButtons()}addButtons(){}tick(){super.tick()}render(e,t,i,s){this.isFullMenu,super.render(e,t,i,s)}}class oe{constructor(e){this.width=0,this.height=0,this.scaledWidth=0,this.scaledHeight=0,this.guiScaleFactor=3,this.mc=e,document.body.contains(document.getElementById("root"))?this.canvas=document.getElementById("root"):(this.canvas=document.createElement("canvas"),this.canvas.id="root",document.body.prepend(this.canvas));const t=document.createElement("style");t.innerHTML="*{box-sizing:border-box;margin:0;padding:0;}body{background:rgb(50,50,50);height:100vh;}",document.head.appendChild(t),window.addEventListener("resize",(()=>{this.mc.updateWindowSize()}))}setGuiScale(e){this.guiScaleFactor=e;const t=~~(window.innerWidth/e);this.scaledWidth=t;const i=~~(window.innerHeight/e);this.scaledHeight=i}calcGuiScale(e,t){let i;for(i=1;i!=e&&i<window.innerWidth&&i<window.innerHeight+40&&window.innerWidth/(i+1)>=320&&(window.innerHeight+40)/(i+1)>=240;++i);return t&&i%2!=0&&++i,i}getScaledWidth(){return~~this.scaledWidth}getScaledHeight(){return~~this.scaledHeight}getGuiScaleFactor(){return this.guiScaleFactor}getCanvas(){return this.canvas}}class he{constructor(){this.buffer=new Map}add(e,t){this.buffer.get(e)||this.buffer.set(e,t)}get(e){try{if(this.buffer.has(e))return this.buffer.get(e);{const e=document.createElement("canvas");return e.width=e.height=1,e}}catch(e){const t=document.createElement("canvas");return t.width=t.height=1,t}}has(e){return this.buffer.has(e)}remove(e){try{if(this.buffer.has(e)){let t=this.buffer.get(e);return this.buffer.delete(e),t}}catch(t){s.createLog(`Failed to remove buffer of key ${e}`)}}clearAll(){this.buffer.clear()}}var ce=function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};class le{constructor(){this.TEXTURES=["textures/font/ascii.png","textures/gui/widgets.png","textures/gui/title/mojangstudios.png","textures/gui/title/minecraft.png","textures/gui/title/edition.png","textures/gui/options_background.png","textures/font/accented.png","textures/gui/checkbox.png","textures/gui/accessibility.png","textures/gui/icons.png","textures/item/acacia_boat.png","textures/item/acacia_door.png","textures/item/acacia_sign.png","textures/item/apple.png","textures/item/armor_stand.png","textures/item/arrow.png","textures/item/baked_potato.png","textures/item/bamboo.png","textures/item/barrier.png","textures/item/beef.png","textures/item/beetroot.png","textures/item/beetroot_seeds.png","textures/item/beetroot_soup.png","textures/item/bell.png","textures/item/birch_boat.png","textures/item/birch_door.png","textures/item/birch_sign.png","textures/item/black_dye.png","textures/item/blaze_powder.png","textures/item/blaze_rod.png","textures/item/blue_dye.png","textures/item/bone.png","textures/item/bone_meal.png","textures/item/book.png","textures/item/bow.png","textures/item/bowl.png","textures/item/bow_pulling_0.png","textures/item/bow_pulling_1.png","textures/item/bow_pulling_2.png","textures/item/bread.png","textures/item/brewing_stand.png","textures/item/brick.png","textures/item/broken_elytra.png","textures/item/brown_dye.png","textures/item/bucket.png","textures/item/cake.png","textures/item/campfire.png","textures/item/carrot.png","textures/item/carrot_on_a_stick.png","textures/item/cauldron.png","textures/item/chain.png","textures/item/chainmail_boots.png","textures/item/chainmail_chestplate.png","textures/item/chainmail_helmet.png","textures/item/chainmail_leggings.png","textures/item/charcoal.png","textures/item/chest_minecart.png","textures/item/chicken.png","textures/item/chorus_fruit.png","textures/item/clay_ball.png","textures/item/clock.png","textures/item/coal.png","textures/item/cocoa_beans.png","textures/item/cod.png","textures/item/cod_bucket.png","textures/item/command_block_minecart.png","textures/item/comparator.png","textures/item/compass.png","textures/item/cooked_beef.png","textures/item/cooked_chicken.png","textures/item/cooked_cod.png","textures/item/cooked_mutton.png","textures/item/cooked_porkchop.png","textures/item/cooked_rabbit.png","textures/item/cooked_salmon.png","textures/item/cookie.png","textures/item/creeper_banner_pattern.png","textures/item/crimson_door.png","textures/item/crimson_sign.png","textures/item/crossbow_arrow.png","textures/item/crossbow_firework.png","textures/item/crossbow_pulling_0.png","textures/item/crossbow_pulling_1.png","textures/item/crossbow_pulling_2.png","textures/item/crossbow_standby.png","textures/item/cyan_dye.png","textures/item/dark_oak_boat.png","textures/item/dark_oak_door.png","textures/item/dark_oak_sign.png","textures/item/diamond.png","textures/item/diamond_axe.png","textures/item/diamond_boots.png","textures/item/diamond_chestplate.png","textures/item/diamond_helmet.png","textures/item/diamond_hoe.png","textures/item/diamond_horse_armor.png","textures/item/diamond_leggings.png","textures/item/diamond_pickaxe.png","textures/item/diamond_shovel.png","textures/item/diamond_sword.png","textures/item/dragon_breath.png","textures/item/dried_kelp.png","textures/item/egg.png","textures/item/elytra.png","textures/item/emerald.png","textures/item/empty_armor_slot_boots.png","textures/item/empty_armor_slot_chestplate.png","textures/item/empty_armor_slot_helmet.png","textures/item/empty_armor_slot_leggings.png","textures/item/empty_armor_slot_shield.png","textures/item/enchanted_book.png","textures/item/ender_eye.png","textures/item/ender_pearl.png","textures/item/end_crystal.png","textures/item/experience_bottle.png","textures/item/feather.png","textures/item/fermented_spider_eye.png","textures/item/filled_map.png","textures/item/filled_map_markings.png","textures/item/firework_rocket.png","textures/item/firework_star.png","textures/item/firework_star_overlay.png","textures/item/fire_charge.png","textures/item/fishing_rod.png","textures/item/fishing_rod_cast.png","textures/item/flint.png","textures/item/flint_and_steel.png","textures/item/flower_banner_pattern.png","textures/item/flower_pot.png","textures/item/furnace_minecart.png","textures/item/ghast_tear.png","textures/item/glass_bottle.png","textures/item/glistering_melon_slice.png","textures/item/globe_banner_pattern.png","textures/item/glowstone_dust.png","textures/item/golden_apple.png","textures/item/golden_axe.png","textures/item/golden_boots.png","textures/item/golden_carrot.png","textures/item/golden_chestplate.png","textures/item/golden_helmet.png","textures/item/golden_hoe.png","textures/item/golden_horse_armor.png","textures/item/golden_leggings.png","textures/item/golden_pickaxe.png","textures/item/golden_shovel.png","textures/item/golden_sword.png","textures/item/gold_ingot.png","textures/item/gold_nugget.png","textures/item/gray_dye.png","textures/item/green_dye.png","textures/item/gunpowder.png","textures/item/heart_of_the_sea.png","textures/item/honeycomb.png","textures/item/honey_bottle.png","textures/item/hopper.png","textures/item/hopper_minecart.png","textures/item/ink_sac.png","textures/item/iron_axe.png","textures/item/iron_boots.png","textures/item/iron_chestplate.png","textures/item/iron_door.png","textures/item/iron_helmet.png","textures/item/iron_hoe.png","textures/item/iron_horse_armor.png","textures/item/iron_ingot.png","textures/item/iron_leggings.png","textures/item/iron_nugget.png","textures/item/iron_pickaxe.png","textures/item/iron_shovel.png","textures/item/iron_sword.png","textures/item/item_frame.png","textures/item/jungle_boat.png","textures/item/jungle_door.png","textures/item/jungle_sign.png","textures/item/kelp.png","textures/item/knowledge_book.png","textures/item/lantern.png","textures/item/lapis_lazuli.png","textures/item/lava_bucket.png","textures/item/lead.png","textures/item/leather.png","textures/item/leather_boots.png","textures/item/leather_boots_overlay.png","textures/item/leather_chestplate.png","textures/item/leather_chestplate_overlay.png","textures/item/leather_helmet.png","textures/item/leather_helmet_overlay.png","textures/item/leather_horse_armor.png","textures/item/leather_leggings.png","textures/item/leather_leggings_overlay.png","textures/item/light_blue_dye.png","textures/item/light_gray_dye.png","textures/item/lime_dye.png","textures/item/lingering_potion.png","textures/item/magenta_dye.png","textures/item/magma_cream.png","textures/item/map.png","textures/item/melon_seeds.png","textures/item/melon_slice.png","textures/item/milk_bucket.png","textures/item/minecart.png","textures/item/mojang_banner_pattern.png","textures/item/mushroom_stew.png","textures/item/music_disc_11.png","textures/item/music_disc_13.png","textures/item/music_disc_blocks.png","textures/item/music_disc_cat.png","textures/item/music_disc_chirp.png","textures/item/music_disc_far.png","textures/item/music_disc_mall.png","textures/item/music_disc_mellohi.png","textures/item/music_disc_pigstep.png","textures/item/music_disc_stal.png","textures/item/music_disc_strad.png","textures/item/music_disc_wait.png","textures/item/music_disc_ward.png","textures/item/mutton.png","textures/item/name_tag.png","textures/item/nautilus_shell.png","textures/item/netherite_axe.png","textures/item/netherite_boots.png","textures/item/netherite_chestplate.png","textures/item/netherite_helmet.png","textures/item/netherite_hoe.png","textures/item/netherite_ingot.png","textures/item/netherite_leggings.png","textures/item/netherite_pickaxe.png","textures/item/netherite_scrap.png","textures/item/netherite_shovel.png","textures/item/netherite_sword.png","textures/item/nether_brick.png","textures/item/nether_sprouts.png","textures/item/nether_star.png","textures/item/nether_wart.png","textures/item/oak_boat.png","textures/item/oak_door.png","textures/item/oak_sign.png","textures/item/orange_dye.png","textures/item/painting.png","textures/item/paper.png","textures/item/phantom_membrane.png","textures/item/piglin_banner_pattern.png","textures/item/pink_dye.png","textures/item/poisonous_potato.png","textures/item/popped_chorus_fruit.png","textures/item/porkchop.png","textures/item/potato.png","textures/item/potion.png","textures/item/potion_overlay.png","textures/item/prismarine_crystals.png","textures/item/prismarine_shard.png","textures/item/pufferfish.png","textures/item/pufferfish_bucket.png","textures/item/pumpkin_pie.png","textures/item/pumpkin_seeds.png","textures/item/purple_dye.png","textures/item/quartz.png","textures/item/rabbit.png","textures/item/rabbit_foot.png","textures/item/rabbit_hide.png","textures/item/rabbit_stew.png","textures/item/redstone.png","textures/item/red_dye.png","textures/item/repeater.png","textures/item/rotten_flesh.png","textures/item/ruby.png","textures/item/saddle.png","textures/item/salmon.png","textures/item/salmon_bucket.png","textures/item/scute.png","textures/item/seagrass.png","textures/item/sea_pickle.png","textures/item/shears.png","textures/item/shulker_shell.png","textures/item/skull_banner_pattern.png","textures/item/slime_ball.png","textures/item/snowball.png","textures/item/soul_campfire.png","textures/item/soul_lantern.png","textures/item/spawn_egg.png","textures/item/spawn_egg_overlay.png","textures/item/spectral_arrow.png","textures/item/spider_eye.png","textures/item/splash_potion.png","textures/item/spruce_boat.png","textures/item/spruce_door.png","textures/item/spruce_sign.png","textures/item/stick.png","textures/item/stone_axe.png","textures/item/stone_hoe.png","textures/item/stone_pickaxe.png","textures/item/stone_shovel.png","textures/item/stone_sword.png","textures/item/string.png","textures/item/structure_void.png","textures/item/sugar.png","textures/item/sugar_cane.png","textures/item/suspicious_stew.png","textures/item/sweet_berries.png","textures/item/tipped_arrow_base.png","textures/item/tipped_arrow_head.png","textures/item/tnt_minecart.png","textures/item/totem_of_undying.png","textures/item/trident.png","textures/item/tropical_fish.png","textures/item/tropical_fish_bucket.png","textures/item/turtle_egg.png","textures/item/turtle_helmet.png","textures/item/warped_door.png","textures/item/warped_fungus_on_a_stick.png","textures/item/warped_sign.png","textures/item/water_bucket.png","textures/item/wheat.png","textures/item/wheat_seeds.png","textures/item/white_dye.png","textures/item/wooden_axe.png","textures/item/wooden_hoe.png","textures/item/wooden_pickaxe.png","textures/item/wooden_shovel.png","textures/item/wooden_sword.png","textures/item/writable_book.png","textures/item/written_book.png","textures/item/yellow_dye.png"],this.textures=new Map,this.textureBuffer=new he}load(){return ce(this,void 0,void 0,(function*(){this.apply(yield this.prepare())}))}apply(e){this.textures.clear(),e.forEach((e=>{this.textures.set(e.resourceLocation.getFullPath(),e.data)}))}prepare(){return ce(this,void 0,void 0,(function*(){try{const e=this.TEXTURES.map((e=>ce(this,void 0,void 0,(function*(){const t=new r(e),i=yield fetch(t.getFullPath()),s=yield i.blob();let n=new Image;return n.src=URL.createObjectURL(s),{resourceLocation:t,data:n}}))));return yield Promise.all(e)}catch(e){return[]}}))}getTexture(e){return this.textures.get(e.getFullPath())}addTexture(e){return ce(this,void 0,void 0,(function*(){let t=new Image;t.src=yield this.loadTexture(e),this.textures.set(e.getFullPath(),t)}))}loadTexture(e){return ce(this,void 0,void 0,(function*(){let t=new Request(e.getFullPath());return fetch(t).then((e=>e.blob())).then((e=>URL.createObjectURL(e)))}))}}var ue=function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};class ge{constructor(e){this.LANGFILES=["en_us","pt_pt"],this.languageFiles=new Map,this.currentLanguage=e}load(){return ue(this,void 0,void 0,(function*(){this.apply(yield this.prepare())}))}apply(e){this.languageFiles.clear(),e.forEach((e=>{this.languageFiles.set(e.filename,e.data)}))}prepare(){return ue(this,void 0,void 0,(function*(){try{const e=this.LANGFILES.map((e=>ue(this,void 0,void 0,(function*(){const t=s.formatString("lang/%s.json",e),i=yield fetch(new r(t).getFullPath()),n=yield i.json();return{filename:e,data:n}}))));return yield Promise.all(e)}catch(e){return[]}}))}getLanguageData(e){return this.languageFiles.get(e)}}class de{static resetKeyBehavior(e,t){e.key==t&&e.preventDefault()}static setKeyCallbacks(e){window.addEventListener("keydown",(t=>{de.resetKeyBehavior(t,"F3"),de.resetKeyBehavior(t,"F5"),de.resetKeyBehavior(t,"F7"),de.resetKeyBehavior(t,"F8"),de.resetKeyBehavior(t,"F11"),de.resetKeyBehavior(t,"Escape"),de.resetKeyBehavior(t,"Tab"),e(t.key,1,{altKeyDown:t.getModifierState("Alt"),altGrKeyDown:t.getModifierState("AltGraph"),capsLockKeyDown:t.getModifierState("CapsLock"),controlKeyDown:t.getModifierState("Control"),numLockKeyDown:t.getModifierState("NumLock"),shiftKeyDown:t.getModifierState("Shift")})})),window.addEventListener("keyup",(t=>{e(t.key,0,{altKeyDown:t.getModifierState("Alt"),altGrKeyDown:t.getModifierState("AltGraph"),capsLockKeyDown:t.getModifierState("CapsLock"),controlKeyDown:t.getModifierState("Control"),numLockKeyDown:t.getModifierState("NumLock"),shiftKeyDown:t.getModifierState("Shift")})}))}static setMouseCallbacks(e,t,i){window.addEventListener("mousemove",(t=>{e(t.clientX,t.clientY)})),window.addEventListener("mouseup",(e=>{t(e.button,0,{altKeyDown:e.getModifierState("Alt"),altGrKeyDown:e.getModifierState("AltGraph"),capsLockKeyDown:e.getModifierState("CapsLock"),controlKeyDown:e.getModifierState("Control"),numLockKeyDown:e.getModifierState("NumLock"),shiftKeyDown:e.getModifierState("Shift")})})),window.addEventListener("mousedown",(e=>{t(e.button,1,{altKeyDown:e.getModifierState("Alt"),altGrKeyDown:e.getModifierState("AltGraph"),capsLockKeyDown:e.getModifierState("CapsLock"),controlKeyDown:e.getModifierState("Control"),numLockKeyDown:e.getModifierState("NumLock"),shiftKeyDown:e.getModifierState("Shift")})})),window.addEventListener("contextmenu",(e=>{e.preventDefault()})),window.addEventListener("wheel",(e=>{e.getModifierState("Control")&&e.preventDefault(),i(e.deltaX,e.deltaY)}),{passive:!1})}}class me{constructor(e){this.i=0,this.mc=e}onKeyEvent(e,t,i){const s=this.mc.currentScreen;1!=t?0==t&&(null==s||s.keyReleased(e,i)):null==s||s.keyPressed(e,i)}setupCallbacks(){de.setKeyCallbacks(((e,t,i)=>{this.onKeyEvent(e,t,i)}))}}class pe{constructor(e){this.leftDown=!1,this.middleDown=!1,this.rightDown=!1,this.mouseX=0,this.mouseY=0,this.ignoreFirstMove=!0,this.touchScreenCounter=0,this.eventTime=0,this.accumulatedScrollDelta=0,this.activeButton=-1,this.minecraft=e}registerCallbacks(){de.setMouseCallbacks(((e,t)=>{this.cursorPosCallback(e,t)}),((e,t,i)=>{this.mouseButtonCallback(e,t)}),((e,t)=>{this.scrollCallback(e,t)}))}mouseButtonCallback(e,t){if(null==this.minecraft.loadingGui){const i=1===t,s=e;i?this.activeButton=s:-1!=this.activeButton&&(this.activeButton=-1);let n=new Array(!1);if(null!==this.minecraft.currentScreen){let e=this.mouseX/this.minecraft.getMainCanvas().getGuiScaleFactor(),t=this.mouseY/this.minecraft.getMainCanvas().getGuiScaleFactor();i?S.wrapScreenError((()=>{n[0]=this.minecraft.currentScreen.mouseClicked(e,t,s)}),"mouseClicked event handler",this.minecraft.currentScreen.getClassName()):S.wrapScreenError((()=>{n[0]=this.minecraft.currentScreen.mouseReleased(e,t,s)}),"mouseReleased event handler",this.minecraft.currentScreen.getClassName())}n[0]||null!=this.minecraft.currentScreen&&!this.minecraft.currentScreen.passEvents||(0==s?this.leftDown=i:2==s?this.middleDown=i:1==s&&(this.rightDown=i))}}scrollCallback(e,t){if(null!=this.minecraft.currentScreen){let e=this.mouseX/this.minecraft.getMainCanvas().getGuiScaleFactor(),i=this.mouseY/this.minecraft.getMainCanvas().getGuiScaleFactor();this.minecraft.currentScreen.mouseScrolled(e,i,t)}}cursorPosCallback(e,t){this.ignoreFirstMove&&(this.mouseX=e,this.mouseY=t,this.ignoreFirstMove=!1);const i=this.minecraft.currentScreen;if(null!==i){let s=e/3,n=t/3;if(S.wrapScreenError((()=>{i.mouseMoved(s,n)}),"mouseMoved event handler",i.getClassName()),-1!==this.activeButton){let r=(e-this.mouseX)*this.minecraft.getMainCanvas().getGuiScaleFactor(),a=(t-this.mouseY)*this.minecraft.getMainCanvas().getGuiScaleFactor();i.mouseDragged(s,n,this.activeButton,r,a)}}this.mouseX=e,this.mouseY=t}isLeftDown(){return this.leftDown}isRightDown(){return this.rightDown}getMouseX(){return this.mouseX}getMouseY(){return this.mouseY}}var Se=function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};class fe{constructor(){this.possibleSplashes=new Array}load(){return Se(this,void 0,void 0,(function*(){const e=yield fetch(new r("font/default.json").getFullPath()),t=yield e.json();fe.SPLASHES=t,this.apply(yield this.prepare())}))}apply(e){this.possibleSplashes=[],this.possibleSplashes=e}prepare(){return Se(this,void 0,void 0,(function*(){try{const e=yield fetch("./resources/assets/minecraft/texts/splashes.txt").then((e=>e.text())).then((e=>e.split(/\r?\n/)));return yield Promise.all(e)}catch(e){return[]}}))}getSplashText(){const e=new Date,t=e.getMonth(),i=e.getDate();return t+1===12&&24===i?"Merry X-mas!":t+1===1&&1===i?"Happy new year!":t+1===10&&31===i?"OOoooOOOoooo! Spooky!":0===this.possibleSplashes.length?"":this.possibleSplashes[Math.ceil(Math.random()*(this.possibleSplashes.length-1))]}}class we{constructor(e,t){this.renderPartialTicks=0,this.elapsedPartialTicks=0,this.tickLength=1e3/e,this.lastSyncSysClock=t}getPartialTicks(e){this.elapsedPartialTicks=(e-this.lastSyncSysClock)/this.tickLength,this.lastSyncSysClock=e,this.renderPartialTicks+=this.elapsedPartialTicks;let t=Math.ceil(this.renderPartialTicks);return this.renderPartialTicks-=t,t}}class _e{constructor(e){this.fadeOutStart=-1,this.fadeInStart=-1,this.mc=e,this.reloading=!0}changeReloading(e){this.reloading=e}render(e,t,i,s){let n=this.mc.getMainCanvas().getScaledWidth(),r=this.mc.getMainCanvas().getScaledHeight();e.fillStyle="rgb(220, 0, 0)",e.fillRect(0,0,n,r),this.mc.getTextureManager().getTexture(_e.MOJANG_LOGO_TEXTURE)}}_e.MOJANG_LOGO_TEXTURE=new r("textures/gui/title/mojangstudios.png");var ye,xe;class Ie{constructor(e){this.timer=new we(20,0),this.running=!0,this.currentScreen=null,this.world=null,this.fps=0,this.times=[],this.testPlayerName="Steve",this.loadingGui=null,this.isReloading=!1,Ie.instance=this,this.launchedVersion=e.gameInfo.version,this.versionType=e.gameInfo.versionType,this.isDemo=e.gameInfo.isDemo,this.enableMultiplayer=!e.gameInfo.disableMultiplayer,this.enableChat=!e.gameInfo.disableChat,this.testPlayerName=e.userInfo.userName,this.gameSettings=new te(this),this.textureManager=new le,this.textureBuffer=this.textureManager.textureBuffer,this.splashes=new fe,this.languageManager=new ge(this.gameSettings.language),this.soundHandler=new i(this,this.gameSettings),this.mainCanvas=new oe(this),this.context=this.mainCanvas.getCanvas().getContext("2d"),this.mouseHelper=new pe(this),this.mouseHelper.registerCallbacks(),this.keyboardListener=new me(this),this.keyboardListener.setupCallbacks(),this.fontRenderer=new ie,this.forceUnicodeFont(this.getForceUnicodeFont()),this.gameRenderer=new Z(this),this.ingameGUI=new re(this),this.maxFPS=this.gameSettings.framerateLimit,this.updateWindowSize(),this.displayGuiScreen(new J(!0)),this.loadResources()}loadResources(){var e;return function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return this.setLoadingGui(new _e(this)),this.isReloading=!0,yield this.textureManager.load(),yield this.fontRenderer.load(),yield this.languageManager.load(),yield this.splashes.load(),this.isReloading=!1,this.setLoadingGui(null),null===(e=this.currentScreen)||void 0===e?void 0:e.initScreen(this,this.getMainCanvas().getScaledWidth(),this.getMainCanvas().getScaledHeight())}))}run(){this.timeThen=Date.now();try{this.getRefreshRate().then((e=>{if(this.deviceRefreshRate=e,null!==this.deviceRefreshRate||void 0!==this.deviceRefreshRate){let e,t=!1;const i=()=>{window.setRunning=t=>t?(this.running=!0,e=requestAnimationFrame(i),!0):(this.running=!1,!1),e=requestAnimationFrame(i),this.timeNow=Date.now(),this.timeElapsed=this.timeNow-this.timeThen;let s=1e3/(this.gameSettings.vsync?this.deviceRefreshRate:this.maxFPS);this.timeElapsed>s&&(this.timeThen=this.timeNow-this.timeElapsed%s,this.running?this.runGameLoop(!t):cancelAnimationFrame(e))};i()}}))}catch(e){s.createLog("Couldn't run Minecraft!","\n\nMore Details:",`\n\t${e}`)}}getFPS(){for(var e=performance.now();this.times.length>0&&this.times[0]<=e-1e3;)this.times.shift();return this.times.push(e),this.fps=this.times.length,this.fps}runGameLoop(e){let t=s.nanoTime();if(e){let e=this.timer.getPartialTicks(s.milliTime());for(let t=0;t<Math.min(10,e);++t)this.runTick()}this.skipRenderWorld||this.gameRenderer.updateCameraAndRender(this.isGamePaused?this.renderPartialTicksPaused:this.timer.renderPartialTicks,t,e);let i=null!=this.currentScreen&&this.currentScreen.isPauseScreen()&&!0;this.isGamePaused!=i&&(this.isGamePaused?this.renderPartialTicksPaused=this.timer.renderPartialTicks:this.timer.renderPartialTicks=this.renderPartialTicksPaused,this.isGamePaused=i)}updateWindowSize(){let e=this.mainCanvas.calcGuiScale(this.gameSettings.guiScale,this.getForceUnicodeFont());this.mainCanvas.setGuiScale(e),this.context.canvas.width=window.innerWidth,this.context.canvas.height=window.innerHeight,this.context.scale(e,e),this.context.imageSmoothingEnabled=!1,null!=this.currentScreen&&this.currentScreen.resize(this,this.mainCanvas.getScaledWidth(),this.mainCanvas.getScaledHeight())}shutdown(){this.running=!1}isRunning(){return this.running}displayInGameMenu(e){null==this.currentScreen&&this.displayGuiScreen(new ae(!e))}runTick(){this.isGamePaused||this.ingameGUI.tick(),null!==this.currentScreen&&S.wrapScreenError((()=>{this.currentScreen.tick()}),"Ticking screen",this.currentScreen.getClassName()),this.gameSettings.showDebugInfo||this.ingameGUI.reset(),(null==this.currentScreen||this.currentScreen.passEvents)&&this.processKeyBinds(),null==this.world||this.isGamePaused||this.gameRenderer.tick()}processKeyBinds(){}displayGuiScreen(e){null!=this.currentScreen&&this.currentScreen.onClose(),null==e&&null==this.world&&(e=new J),(e instanceof J||e instanceof P)&&(this.gameSettings.showDebugInfo=!1),this.currentScreen=e,null!=e&&e.initScreen(this,this.mainCanvas.getScaledWidth(),this.mainCanvas.getScaledHeight())}forceUnicodeFont(e){this.fontRenderer.changeForceUnicodeFont(e),e?(this.getMainCanvas().setGuiScale(4),this.updateWindowSize()):(this.getMainCanvas().setGuiScale(3),this.updateWindowSize())}setLoadingGui(e){this.loadingGui=e}static getInstance(){return Ie.instance}static isGuiEnabled(){return!this.instance.gameSettings.hideGUI}getIsDemo(){return this.isDemo}getVersion(){return this.launchedVersion}getVersionType(){return this.versionType}getForceUnicodeFont(){return this.gameSettings.forceUnicodeFont}getPlayerName(){return this.testPlayerName}isMultiplayerEnabled(){return this.enableMultiplayer}isChatEnabled(){return this.enableChat}isModdedClient(){return!1}getIsGamePaused(){return this.isGamePaused}getRenderPartialTicks(){return this.timer.renderPartialTicks}getTickLength(){return this.timer.elapsedPartialTicks}getMainCanvas(){return this.mainCanvas}getSplashes(){return this.splashes}getLanguageManager(){return this.languageManager}getSoundHandler(){return this.soundHandler}getTextureManager(){return this.textureManager}getRefreshRate(){return new Promise((e=>requestAnimationFrame((t=>requestAnimationFrame((i=>e(1e3/(i-t))))))))}setFramerateLimit(e){this.gameSettings.vsync?this.maxFPS=this.deviceRefreshRate:this.maxFPS=e}testSwitchLang(){"pt_pt"==this.gameSettings.language?this.gameSettings.language="en_us":this.gameSettings.language="pt_pt",this.gameSettings.saveOptions(),this.updateWindowSize()}}String.prototype.equals=function(e){return String(this)===e},xe=function*(){const t=new e(new e.UserInformation("KalmeMarq"),new e.GameInformation(!1,"1.17.0","release",!1,!1));let i;try{i=new Ie(t),s.createLog("Minecraft Initialized!"),i.run()}catch(e){s.createLog("Couldn't Initialize Minecraft!","\n\nMore Details:",`\n\t${e}`)}},new((ye=void 0)||(ye=Promise))((function(e,t){function i(e){try{n(xe.next(e))}catch(e){t(e)}}function s(e){try{n(xe.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof ye?n:new ye((function(e){e(n)}))).then(i,s)}n((xe=xe.apply(undefined,[])).next())}))})();